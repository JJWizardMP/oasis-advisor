(this.$WP=this.$WP||[]).push(["a85j32",(e,t)=>{var i,a,r,n,l,o,d,s,c,p,u,m,v,h,g,_,f,b,y,T,I,w,k,C,N,P,S,D,x,M,B,A,E,L,O,R,j,z,V,G,q,F,H,W,U,Z,Y,$,X,J,K,Q,ee,et,ei,ea,er,en,el,eo,ed,es,ec,ep,eu,em,ev,eh,eg,e_,ef,eb,ey,eT,eI,ew,ek,eC,eN,eP,eS,eD,ex,eM,eB,eA,eE,eL,eO,eR,ej,ez,eV,eG,eq,eF,eH,eW,eU,eZ,eY,e$,eX,eJ,eK,eQ,e0,e1,e2,e3,e4,e8,e6,e9,e5,e7,te,tt,ti,ta,tr,tn,tl,to,td,ts,tc,tp,tu,tm,tv,th,tg,t_,tf,tb,ty,tT,tI,tw,tk,tC,tN,tP,tS,tD,tx,tM,tB,tA,tE,tL,tO=({children:e})=>{var[t,a]=n(!1),r=l(()=>({isStickyHeaderOpen:t,setIsStickyHeaderOpen:a}),[t,a]);return i(te.Provider,{value:r,children:e})},tR=()=>{var e=o(te);if(null==e)throw Error("useStickyHeaderContext used when not inside of a StickHeaderContextProvider");return e},tj=({children:e,scrollContainerRef:t,sectionRefMapping:a})=>{var[r,o]=n(0),d=s(a),u=s(new Map);c(()=>{d.current=a},[a]);var m=p((e,t)=>{var i="string"==typeof e?d.current.get(e):e;if(null==i||null==t)return()=>{};var a=u.current.get(i)||[];return a.push(t),u.current.set(i,a),function(){u.current.set(i,a.filter(e=>e!==t))}},[]),v=p(e=>{var i="string"==typeof e?d.current.get(e):e;if(i?.current){var a=u.current.get(i);a?.length?a.forEach(e=>e(n,i,r)):n(r)}function n(e){if(i?.current){var{y:a}=i.current.getBoundingClientRect();t?.current?.scrollBy({top:a-e,behavior:"smooth"})}}},[r,t]),h=l(()=>({sectionRefMapping:a,scrollOffset:r,setScrollOffset:o,scrollToSection:v,registerHandler:m,scrollContainerRef:t}),[a,r,o,v,m,t]);return i(ti.Provider,{value:h,children:i(tt,{children:e})})},tz=()=>{var e=o(ti);if(null==e)throw Error("useSectionScrollContext used when not inside of a SectionScrollProvider");return e},tV=(e,t)=>{var{registerHandler:i}=tz(),a=s(void 0);c(()=>{a.current=t});var r=p((e,t,i)=>{a.current?.(e,t,i)},[]);c(()=>i(e,r),[i,r,e])};function tG({onScroll:e,throttle:t,useDebounce:i,useCapture:a,scrollContainerRef:r}){var n=t||200,o=l(()=>R(e,n,{trailing:!i}),[e,n,i]);return c(()=>{var e=r?.current;if(null!=e&&null!=o)return e.addEventListener("scroll",o,a),()=>{e.removeEventListener("scroll",o,a)}},[r,o,a]),null}var tq={sticky:"aGWPa _U l",stickyHeader:"SRyWz t",visible:"APidY",row:"nhHCc f u k",tabWrapper:"_u w",saveOrViewTripCtaWrapper:"jZhZO I"},tF=({anchorRef:e,tabBar:t,tabSectionRefs:r,onVisible:l,onActiveTabChange:o,saveOrViewTripCta:d})=>{var u=S(),m=E(),[v,h]=n(0),[g,_]=n(!1),[f,b]=n(0),y=s(null),{scrollToSection:I,setScrollOffset:w,scrollContainerRef:k}=tz(),{setIsStickyHeaderOpen:C}=tR(),N=p(()=>{if(e.current){var{offsetTop:t}=e.current,{top:i}=e.current.getBoundingClientRect(),a=i<t;_(a),C(a)}},[e,C]),P=p(()=>{var e=y.current?.getBoundingClientRect()?.top??0,t=(y.current?y.current.offsetHeight+10:10)+e;b(t),w(t)},[y,w,b]),D=p(()=>{var e=f+1,t=Number.MAX_SAFE_INTEGER,i=0;r.forEach((a,r)=>{if(a.current){var n=Math.abs(a.current.getBoundingClientRect().y-e);n<t&&(i=r,t=n)}}),i!==v&&o(i),h(i)},[r,f,v,o]),x=p(()=>{N(),P(),D()},[D,P,N]);return(c(()=>{N(),P()},[P,N]),c(()=>{g&&l?.()},[g,l]),m)?null:i("div",{ref:y,className:L(tq.sticky,tq.stickyHeader,g&&tq.visible),children:a(T,{fullBleedDesktopAndSmaller:!0,children:[i(O,{callback:x,throttle:300}),i(tG,{scrollContainerRef:k,onScroll:x,throttle:300}),a("div",{className:tq.row,children:[i("div",{className:tq.tabWrapper,children:t(I,v)}),i("div",{className:tq.saveOrViewTripCtaWrapper,children:"MOBILE"!==u&&d("sticky-header")})]})]})})},tH={"title-02":28,"title-03":24,"title-04":18,"body-01":16},tW=({width:e,variant:t="body-01"})=>i("div",{style:{width:e,height:tH[t]},className:eB("NvuUX o",{BfjIN:"title-02"===t,zhRLt:"title-03"===t,loyuq:"title-04"===t,gfvTs:"body-01"===t}),children:i(q,{})}),tU=["95%","97%","92%","98%","96%"],tZ=({lines:e=5,...t})=>{var[a]=eA(t);return i("div",{className:eE(a),children:[...Array(e).keys()].map(e=>i("div",{className:"tyqkd",children:i(tn,{width:tU[e%tU.length]})},e))})},tY=()=>i("div",{className:"w _Z Re o",children:i(q,{})}),t$=()=>a("div",{children:[i(q,{}),i("div",{className:"_Q t l w",children:i(F,{})})]}),tX=({variant:e="ThumbsUp",tripId:t})=>{var a=I(),{localize:r}=f();return i("div",{ref:eI(p(()=>{a("TripDetailsFeedbackSucessfulSubmit",{tripId:t.toString()})},[a,t])),children:i(Z,{icon:"ThumbsUp"===e?ew:ek,children:i(U,{variant:"body-01",color:"onDarkText",children:"ThumbsUp"===e?r.string("gai_review_summary_feedback_thanks"):r.string("trips_feedback_thanks_thumbs_down")})})})},tJ=({onSubmit:e})=>{var t=S(),{localize:l}=f(),o="MOBILE"===t,[d,s]=n(""),[c,u]=n(ts),[m,v]=n(!1),[h,g]=n(""),_=p((e,t)=>{v(t)},[]),b=p((e,t)=>{u(i=>i.map(i=>i.value===e?{...i,isChecked:t}:i))},[]),y=p(e=>{s(e.target.value)},[]),T=()=>{var t=d.trim();m&&!t?g(l.string("trips_gai_feedback_specify_issue")):(g(""),e([...c,{value:t,label:"Other",isChecked:!!t}]))};return a(r,{children:[a("section",{className:"Ma Nn MJ NP",children:[i(U,{variant:"body-01",children:l.string("trips_gai_feedback_sorry_to_hear_that")}),i(U,{variant:"title-03",marginTop:"spacing-02",children:l.string("trips_gai_feedback_wrong_recommendation")}),c.map(e=>i(eS,{checked:!!e.isChecked,value:e.value,label:e.label,onToggle:b},e.value)),i(eS,{checked:m,value:"4",label:l.string("trips_gai_feedback_other"),onToggle:_}),i(eP,{maxLength:160,errorText:h,value:d,marginTop:"spacing-03",placeholder:l.string("trips_gai_feedback_add_comments"),onChange:y})]}),a("section",{className:"VMdEM f k Pk P- Px PM _Q s w z Gi",children:[i(x,{onClick:T,children:l.string("trips_general_skip")}),i(D,{variant:"primary",size:"medium",onClick:T,fullWidth:o,marginBottom:o?"spacing-03":void 0,children:l.string("trips_general_submit")})]})]})},tK={headerContainer:"YhlKk f Pj PX Pw PJ B1 Z BB",imageContainer:"Xxueo o",descriptionContainer:"f e k Mi Nb MH NM"},tQ=({item:e})=>a("div",{className:tK.headerContainer,children:[e.thumbnail?.photoSizes&&i("div",{className:tK.imageContainer,children:i(et,{source:e.thumbnail?.photoSizes,aspectRatio:"1:1"})}),a("div",{className:tK.descriptionContainer,children:[a("div",{children:[e.name&&i(U,{lineClamp:2,variant:"supporting-03",marginBottom:"spacing-02",children:e.name}),e.reviewSummary?.rating&&e.reviewSummary?.count&&i(eD,{size:"small",rating:e.reviewSummary?.rating,numReviews:e.reviewSummary?.count})]}),e?.placeType&&i(en,{item:e,variant:"minimal"})]})]}),t0=({item:e,isOpen:t,onSubmit:r})=>{var{open:n,close:l}=eC(()=>i(eN,{hideCloseButton:!0,overrideContentStyling:!0,children:i("div",{className:"JUjxe f e",children:a("div",{className:"yLpyj",children:[i("section",{className:"Ma Nn MK NP",children:i(tQ,{item:e})}),i(tJ,{onSubmit:r})]})})}));return c(()=>{t?n():l()},[t,n,l]),null},t1=({isThumbsUp:e,isThumbsDown:t,onThumbsUp:r,onThumbsDown:n,feedbackSent:l,...o})=>{var{localize:d}=f();return a("div",{className:eB("w f k v u Pi PN Pv PA",eE(o)),"data-automation":"trips_gai_preview_trip_day_item_feedback",children:[i(U,{variant:"supporting-01",children:i(_,{id:"trips_gai_feedback_useful_recommendation"})}),a("section",{className:"f v u",children:[i(M,{variant:"clear","aria-label":d.string("trips_gai_feedback_thumbs_up"),onClick:r,icon:e?ew:ex,disabled:l&&!e,dataAttributes:{"data-automation":"trips_gai_preview_trip_day_item_feedback_thumbs_up"}}),i(M,{variant:"clear","aria-label":d.string("trips_gai_feedback_thumbs_down"),onClick:n,icon:t?ek:eM,marginLeft:"spacing-03",disabled:l&&!t,dataAttributes:{"data-automation":"trips_gai_preview_trip_day_item_feedback_thumbs_down"}})]})]})},t2=e=>e.reduce((e,t)=>t.isChecked?tc.includes(t.value)||"string"!=typeof t.label?{...e,[t.value]:"selected"}:{...e,[t.label]:t.value}:e,{}),t3=({item:e,tripId:t,onSaveFeedback:l,...o})=>{var d=w(),[s,c]=n(!1),[u,m]=n(!1),[v,h]=n(!1),[g,_]=n(!1),[f]=eT(),b=p((i,a,r)=>{var n=r?t2(r):void 0;l?.(e.locationId?.toString()||"",a,n),d(i,{itemId:e.locationId?.toString()||"",tripId:t.toString(),...a?{helpful:a}:{},...n})},[d,t,l,e]),y=p(()=>{s||(m(!0),c(!0),b("TripDetailsFeedbackForm","YES"),f(i(tX,{tripId:t})))},[s,f,b,t]),T=p(()=>{s||(h(!0),_(!0),c(!0),b("TripDetailsFeedbackForm","NO"))},[s,b]),I=p(e=>{_(!1),b("TripDetailsExperienceIssues","NO",e),f(i(tX,{variant:"ThumbsDown",tripId:t}))},[f,b,t]);return a(r,{children:[i(t1,{isThumbsUp:u,isThumbsDown:v,onThumbsUp:y,onThumbsDown:T,feedbackSent:s,...o}),i(t0,{item:e,onSubmit:I,isOpen:g})]})},t4=({...e})=>i(ey,{children:i(t3,{...e})}),t8=({name:e,link:t,pricingInfo:r,tripId:n,itemId:l,bookableExperienceId:o})=>{var d=b(),s=w(),c=p(()=>{s("TripDetailsCTAClick",{tripId:n,itemId:l,bookableExperienceId:o})},[s,n,l,o]);if(!r?.fromPrice||!e)return null;var u=i(eb,{price:i(U,{variant:"supporting-03",display:"inline",children:d.formatCurrency(r.fromPrice)}),isPerGroupPricing:"UNIT"===r.pricingType,isTieredPricing:r.isTieredPricing||void 0,maxTravelersPerUnit:r.maxTravelersPerUnit||void 0});return a("div",{className:"QrFps f Q3 u Pj PX Pw PJ",children:[i(ef,{size:24}),a("div",{className:"f Fh w k u",children:[i(U,{variant:"supporting-01",lineClamp:2,children:e}),i("div",{className:"F0",children:i(U,{variant:"supporting-01",children:t?i(ei,{onClick:c,theme:"standalone",href:t,activated:!0,target:"_blank",children:u}):u})})]})]})},t6=({link:e,tripId:t,itemId:r,bookableExperienceId:n,pricingInfo:l})=>{var o=b(),d=w(),{localize:s}=f(),c=p(()=>{d("TripDetailsSeeOptions",{tripId:t,itemId:r,bookableExperienceId:n})},[d,t,r,n]);if(!l?.fromPrice)return null;var u=i(eb,{price:i(U,{variant:"supporting-03",display:"inline-block",children:o.formatCurrency(l.fromPrice)}),isPerGroupPricing:"UNIT"===l.pricingType});return a("div",{className:"f Q3 u k Mj",children:[i(U,{variant:"supporting-01",children:u}),e&&i(D,{variant:"secondary-commerce",size:"small",href:e,target:"_blank",onClick:c,children:s.string("trips_commerce_see_options")})]})},t9=({item:e,tripId:t})=>{if(e?.object?.recommendedProduct){var a=e.object.recommendedProduct;return i(t8,{name:a.title?.text||null,pricingInfo:a.pricingInfo,link:a.route?.url,bookableExperienceId:e.object.recommendedProduct.activityId,tripId:t,itemId:e.id})}var r=e?.object?.object;if(em(r)){var n=r.object;if(n?.placeType==="ACTIVITY"&&n?.locationV2?.details?.__typename==="LocationSelection_AttractionProductDetails"&&n?.locationV2.details.productDetails?.pricingInfo)return i(t6,{tripId:t,itemId:e?.id,bookableExperienceId:r.locationId,name:n.name,pricingInfo:n.locationV2.details.productDetails.pricingInfo,link:n.route?.url})}return null},t5=({cardLink:e,tripId:t,title:r,description:l,award:o,photos:d,reviewSummary:s,tripItem:c,onSaveFeedbackItem:p,onClick:u,onIndividualSaveComplete:m})=>{var v=eh(),h="MOBILE"===S(),g=em(c.object?.object)&&c.object?.object?.object||null,[_,f]=n(0),b=(e,i)=>{v({itemName:"SuccessfulItemSave",itemType:"ViewGAI",customData:{itemId:c.id,gaiTripId:t,destinationTripId:i,saveCreationMethod:"GAI",isNew:"CREATED"===e}})},y=el({reviewSummary:s}),T=o?.year?i(ea,{size:"large",color:"BOTB"===o.awardType?"yellow":"green",year:o.year}):void 0,I=ep(c.object?.object),w=i(ec,{id:I?.id??0,type:I?.type,onSaveComplete:m,viewTripOpensNewTab:!0,onViewTripToastVisible:b,onAutosavedToTripToastVisible:b,sourceTripId:t,tripItemId:c.id??0}),k=d?i(J,{award:T,action:w,children:i(ei,{theme:"image",href:e,target:"_blank",onClick:u,"data-automation":"trips_gai_preview_trip_day_item_image",children:i(er,{itemRenderer:e=>i(et,{source:d?.[e],width:"100%",height:"100%"}),totalCount:d.length,currentIndex:_,onNav:e=>f(e),arrowSize:"small"})})}):void 0;return a(K,{header:i(eo,{onClick:u,title:r,reviewData:y,itemLink:e,content:g?.placeType&&i(en,{item:g,variant:"extended"})}),media:k,secondary:i(tu,{tripId:t,item:c}),variant:"vertical",mediaLayout:{type:"FlexMediaVerticalHeight",height:h?150:200},children:[i(Q,{children:i(ee,{children:l})}),g&&i(tp,{item:g,tripId:t,onSaveFeedback:p})]})},t7={__key:0xd08cf1b9c92e,id:"d08cf1b9c92eb825",loc:{},definitions:[]},ie=e=>{if(!e)return null;var{locationItem:t}=e;return t?.object?.placeType==="ACTIVITY"&&t?.object?.locationV2?.details?.__typename==="LocationSelection_AttractionProductDetails"&&t?.object?.locationV2.details.productDetails?.pricingInfo?t?.locationId:e?.tripItem?.object?.recommendedProduct?e?.tripItem?.object?.recommendedProduct?.activityId:null},it=(e,t)=>{var i=96/(e.length||1);return Math.min(100,Math.round(e.reduce((e,t)=>0===t.items.length?e+(t.description?1:0):e+i*((t.items.filter(e=>null!=e.gaiNarration).length+(t.description?1:0))/(t.items.length+1)),0)+(t?4:0)))},ii=e=>{var t=e?.object?.object;if(!em(t))return null;var i=t?.object;return t&&i?.locationId&&e.id?{id:e.id,latitude:i.latitude,longitude:i.longitude,placeType:i.placeType,name:i.name||null,gaiNarration:e?.object?.narrativeDescription?.plainText||null,reviewSummary:i.reviewSummary,photos:eu(i),url:i.route?.url||null,award:i.locationV2?.bestAwardForActiveYearV2?.year?{year:i.locationV2?.bestAwardForActiveYearV2.year,awardType:i.locationV2?.bestAwardForActiveYearV2.awardType??void 0}:void 0,tripItem:e,locationItem:t}:null},ia=e=>{var t=e.generatedTripRequest?.locationIds?.[0],i=t?e.tripLocations?.find(e=>e?.location?.locationId===t):null;return i?i?.location:e.tripLocations?.[0]?.location},ir=(e,t)=>{var{title:i,description:a,items:r,structure:n,generatedTripRequest:l}=e,{locationId:o,latitude:d,longitude:s,name:c}=ia(e)??{},p=new Map;r?.forEach(e=>{e?.id&&p.set(e.id,e)});var u=n?.buckets?.filter(Boolean).map((e,i)=>{var a=t.string("triplist_itineraryday_ffffe73c",{0:i+1}),r=e.narrativeDescription?.plainText,n=e.narrativeDescription,l=[];return(e.items?.filter(Boolean).map(e=>p.get(e)).filter(Boolean)??[]).forEach(e=>{var t=ii(e);t&&l.push(t)}),{id:e.id,title:a,description:r,formattedDescription:n,items:l}})??[];return{title:i,description:a,days:u,centerPoint:null!=d&&null!=s?{latitude:d,longitude:s}:null,geoId:o??null,geoName:c??"",includeChildren:l?.includeChildren??!1,travelingWith:l?.travelingWith,tripDate:l?.tripDate,progress:it(u,null!=a)}},il=(e,t,i)=>{var a=y(),{localize:r}=f(),[l,o]=n(!0),d=s(null),p=s(null),[{fetching:u,error:m,data:v},h]=eL({query:t7,variables:{tripIds:[e??0],currency:a},pause:!e}),g=v?.Trips_getTrips?.[0]??null;return c(()=>{!u&&t&&d.current!==t&&(d.current&&(o(!0),p.current=g,h({requestPolicy:"network-only"})),d.current=t)},[h,u,g,t]),c(()=>{l&&"LOADING"!==i&&p.current!==g&&o(!1)},[l,i,g]),{fetching:u||l,error:m,trip:g?ir(g,r):null}},io="placesToStay",id=e=>`tab:${e}`,is=(e,t)=>`item:${e}-${t}`,ic={container:"ryxip",sidebar:"JXcQL",bar:"fCjSP",card:"ImYPs",marker:"ZrEaT Gy u j Pb PO Po PB",titleMarker:"tGROH"},ip=({tripId:e,dayId:t,item:a,step:r,locationId:l,initiallyExpanded:o=!1,isConnected:d=!0,loading:s,onSaveFeedbackItem:c,onIndividualSaveComplete:u})=>{var[m,v]=n(o),{sectionRefMapping:h,scrollOffset:g,scrollContainerRef:_}=tz(),f=w(),b=h.get(is(t,a.id)),y="MOBILE"===S(),{setSelectedItemId:T}=N(),I=p(()=>{y||T(a.id)},[T,a.id,y]),k=p(()=>{T(null)},[T]);tV(b,(e,t)=>{var i=t?.current?.offsetTop??0;v(!0),setTimeout(()=>{_?.current?.scrollTo({top:i-g,behavior:"smooth"})},0)});var C=p(()=>{f("TripDetailsItemClick",{tripId:e,itemId:a.id,location:a.locationItem?.object?.name,bookableExperienceId:ie(a)})},[a,f,e]),P=p(i=>{f(i?"TripDetailsCollapse":"TripDetailsExpand",{tripId:e,dayId:t,locationId:l}),v(e=>!e)},[f,e,t,l]);if(s&&null==a.gaiNarration)return i(t_,{step:r,isExpanded:m});var D=i(tm,{onClick:C,tripId:e,title:a.name,cardLink:a.url||void 0,photos:a.photos,award:a.award,reviewSummary:a.reviewSummary,onSaveFeedbackItem:c,description:a.gaiNarration&&i(U,{variant:"body-01",dataAttributes:{"data-automation":"trips_gai_preview_trip_day_item_narration","data-automation-day-id":t},children:a.gaiNarration}),tripItem:a.tripItem,onIndividualSaveComplete:u});return i(th,{ref:b,step:r,title:a.name,content:D,isOpen:m,isConnected:d,onExpandCollapseClick:P,onMouseEnter:I,onMouseLeave:k,dataAttributes:{card:{"data-automation":"trips_gai_preview_day_item","data-automation-day-item-id":a.id}}})},iu=({step:e=1,isExpanded:t=!1,isConnected:a=!1})=>{var r="MOBILE"===S();return i(th,{step:e,title:i(tn,{variant:"title-04",width:250}),content:i(K,{header:i(tn,{variant:"title-04",width:200}),media:i(to,{}),variant:"vertical",mediaLayout:{type:"FlexMediaVerticalHeight",height:r?150:200},children:i(Q,{children:i(ee,{children:i(tl,{})})})}),isOpen:t,isConnected:a})},im={openMapButton:"f u j w _Z",openMapOverlay:"VlNqW w _Z",closeMapButton:"BprOh",modal:"emGhX s _U Za Gg"},iv=({tripId:e,days:t,centerPoint:o,geoId:d,loading:s,hideMarkers:u})=>{var m="MOBILE"===S(),[h,g]=n(null),_=w(),{localize:b}=f(),{setSelectedItemId:y}=N(),{placesToStay:T,showPlacesToStay:I}=B();c(()=>{null!==h&&y(null)},[h,y]);var k=l(()=>[...u?[]:t.flatMap(e=>e.items).filter(e=>!s||null!=e.gaiNarration).map(({id:e,latitude:t,longitude:i,placeType:a,reviewSummary:r,name:n,photos:l,url:o,locationItem:d})=>e&&n&&t&&i&&a?{itemId:e,name:n,latitude:t,longitude:i,placeType:a,reviewSummary:r,thumbnail:l?.[0],url:o,locationItem:d}:null).filter(Boolean),...!u&&T&&I?T.map(e=>{var{locationId:t,latitude:i,longitude:a,placeType:r,reviewSummary:n,name:l,photos:o,route:d}=e;return t&&l&&i&&a&&r?{itemId:t,name:l,latitude:i,longitude:a,placeType:r,reviewSummary:n,thumbnail:o?.[0]?.photoSizes??[],url:d?.url,locationItem:{locationId:t,object:e}}:null}).filter(Boolean):[]],[t,u,s,T,I]),P=p(t=>{_(t.zoom>t.oldZoom?"TripDetailsZoomIn":"TripDetailsZoomOut",{tripId:e})},[_,e]),x=p(()=>{_("TripDetailsMapScroll",{tripId:e})},[_,e]),A=p(t=>{_("TripDetailsMapPinClick",{tripId:e,itemId:t})},[_,e]);return d&&o?h?i(z,{hideBackdrop:!0,className:im.modal,children:i(j,{children:i(v,{children:i(C,{locations:k,latitude:o.latitude,longitude:o.longitude,geoId:d,loading:s,onZoomChange:P,onPanStart:x,onPinClick:A,cardPositioning:"map-bottom",children:i("div",{className:im.closeMapButton,children:i(M,{icon:V,onClick:()=>g(!1),"aria-label":b.string("phoenix_accessibility_back_label")})})})})})}):i(C,{locations:k,latitude:o.latitude,longitude:o.longitude,geoId:d,loading:s,onZoomChange:P,onPanStart:x,onPinClick:A,hideLoadingIndicator:!0,children:m&&a(r,{children:[i("div",{className:im.openMapOverlay}),i("div",{className:im.openMapButton,children:a(D,{variant:"secondary",onClick:()=>g(!0),children:[i(G,{size:20}),b.string("trips_gai_trip_preview_map_view")]})})]})}):s?i(td,{}):null},ih=({formattedText:e,referenceHighlighter:t,fallbackText:a})=>{if(!e?.text)return a;var r=new Map(e.references?.filter(Boolean).filter(e=>e?.name!=null).map(e=>[`{{${e.name}}}`,e]));return(e.text.match(RegExp("\\{\\{(?<tag>[\\w-]+)\\}\\}","gu"))||[]).every(e=>r.has(e))?e.text.split(RegExp("(?<tag>\\{\\{[\\w-]+\\}\\})","u")).map((e,a)=>{var n=r.get(e);return i(h,{children:n?t(n):e},a)}):a},ig={container:"XBzgG Y",content:"wltje _ Y",visible:"qKrBp"},i_=({children:e,placeholder:t,ready:r})=>{var[l,o]=n(!1);return c(()=>{var e=setTimeout(()=>{o(!0)},50);return()=>clearTimeout(e)},[]),a("div",{className:L(ig.container,l&&ig.visible),children:[i("div",{className:L(ig.content,r&&ig.visible),children:r?e:null}),!r&&t]})},ib={highlight:"Wb _S",emptyMessage:"c"},iy=({tripId:e,id:t,title:n,geoId:l,geoName:o,formattedDescription:d,fallbackDescription:s,items:c,expandFirstItem:p=!1,loading:u,onSaveFeedbackItem:m,onIndividualSaveComplete:v})=>{var{sectionRefMapping:h,scrollToSection:g}=tz(),f=w(),b=h.get(id(t)),y=d||s?i(tb,{formattedText:d,fallbackText:s,referenceHighlighter:({value:a,itemId:r})=>{var n=r?h.get(is(t,r)):null;if(!n)return a;var l=()=>{f("TripDetailsTextJump",{tripId:e,itemId:r,text:a}),g(n)};return i("span",{role:"button",onClick:l,onKeyDown:e=>"Enter"===e.key&&l(),tabIndex:0,className:ib.highlight,children:i(U,{variant:"button-01",elementType:"span",children:a})})}}):null;return i("div",{ref:b,children:a(ty,{ready:!u||null!=y&&c.length>0,placeholder:a(r,{children:[i(U,{variant:"title-03",children:n}),i(tl,{marginTop:"spacing-02",marginBottom:"spacing-03"}),i(t_,{step:1,isConnected:!0,isExpanded:p}),i(t_,{step:2,isConnected:!0}),i(t_,{step:3})]}),children:[i(U,{variant:"title-03",dataAttributes:{"data-automation":"trips_gai_preview_trip_day_title","data-automation-day-id":t},children:n}),c.length>0?a(r,{children:[y&&i(U,{variant:"body-01",marginTop:"spacing-02",marginBottom:"spacing-03",dataAttributes:{"data-automation":"trips_gai_preview_trip_day_description","data-automation-day-id":t},children:y}),c.map((a,r)=>i(tg,{tripId:e,dayId:t,item:a,locationId:l,initiallyExpanded:p&&0===r,step:r+1,isConnected:r!==c.length-1,loading:u,onSaveFeedbackItem:m,onIndividualSaveComplete:v},a.id))]}):i("div",{className:ib.emptyMessage,children:i(U,{variant:"body-01",marginTop:"spacing-02",marginBottom:"spacing-03",dataAttributes:{"data-automation":"trips_gai_preview_trip_day_empty","data-automation-day-id":t},children:i(_,{id:"trips_gai_day_empty",args:{sGeo:o}})})})]})})},iT={text:"yEZLz _T",completed:"xSFoe"},iI=({text:e,keySpeed:t=25,onComplete:a})=>{var[r,l]=n([]),[o,d]=n(!1),p=s([...e].reverse());return c(()=>{var e=setInterval(()=>{if(p.current.length<=0){d(!0),a?.(),clearInterval(e);return}var t=p.current.pop();l(e=>e.concat(t||""))},t);return()=>{clearInterval(e)}},[t,a,e]),i("div",{className:L(iT.text,o&&iT.completed),children:r.join("")})},iw={poweredByAI:"GZJOX f Q2",iconBrand:"vTQRY Rb f",ctaDisclaimerWrapper:"yrPGt f MJ",saveOrViewTripCtaWrapper:"ZPXDt"},ik=({isOpen:e,close:t,children:a})=>{var r=s(null);return c(()=>{if(r.current&&"undefined"!=typeof IntersectionObserver){var i=new IntersectionObserver(([i])=>{!i.isIntersecting&&e&&t()},{rootMargin:"-160px 0px 0px 0px"});return i.observe(r.current),()=>{i.disconnect()}}return()=>{}},[t,e]),i("div",{ref:r,children:a})},iC=({onClose:e,tripId:t})=>{var{localize:a}=f(),r=eg(t),n=p(t=>{e(t),r({itemName:"CloseHotelsListShelf",customData:{reason:t}})},[e,r]);return i(ej,{items:l(()=>[{key:"have_place_to_stay",content:a.string("trips_v2_gai_places_to_stay_close_option_have_place"),onClick:()=>n("have_place_to_stay"),icon:eO},{key:"dont_like_options",content:a.string("trips_v2_gai_places_to_stay_close_option_dont_like"),onClick:()=>n("dont_like_options"),icon:eM},{key:"not_looking",content:a.string("trips_v2_gai_places_to_stay_close_option_not_looking"),onClick:()=>n("not_looking"),icon:eR}],[a,n]),above:!0,alignEdge:"right",isUpdatedOnScroll:!0,children:(e,t,r,n)=>i(ik,{close:r,isOpen:n,children:i(M,{ref:e,variant:"clear",icon:k,"aria-label":a.string("common_Close"),size:"small",onClick:t})})})},iN={gaiDescriptionIcon:"fReED",descriptionContainer:"eEhMp f",descriptionWrapper:"xhvGI",reviewSnippet:"Ctfoc"},iP=({descriptionText:e,reviewSnippet:t,isAIGenerated:r,numLinesToShow:n})=>{var{localize:o}=f(),d="MOBILE"===S()?1:2,{review:s,text:c}=t||{},p=l(()=>r?i(eW,{className:iN.gaiDescriptionIcon,src:"/img2/trips/itinerary_description_icon_gai.svg","data-automation":"trip_card_description_gai_icon"}):s?.userProfile?.avatar?.photoSizes&&s.userProfile.route?.url?i(ei,{theme:"image",href:s.userProfile.route.url,target:"_blank",children:i(eU,{size:"xs",source:s.userProfile.avatar.photoSizes,marginRight:"spacing-02"})}):null,[s?.userProfile?.avatar?.photoSizes,s?.userProfile?.route?.url,r]),u=l(()=>{var t=c&&s?.userProfile?.displayName&&s.userProfile.route?.url&&s.route?.url;if(r||!t){var l=c||e;return i("p",{className:iN.descriptionWrapper,children:i(U,{elementType:"span",display:"inline",variant:"supporting-01",color:"secondaryText",dataAttributes:{"data-automation":"trip_card_description_expanded"},children:i(eH,{ctaNewline:!0,numLinesToShow:n||d,webkitLineClamp:!0,collapsible:!0,cta:i(x,{variant:"primary-small",marginTop:"spacing-02",dataAttributes:{"data-automation":"trip_card_description_read_more"},children:o.string("common_Read_more")}),ctaCollapse:i(x,{variant:"primary-small",marginTop:"spacing-02",dataAttributes:{"data-automation":"trip_card_description_read_less"},children:o.string("common_Readless")}),children:l},eZ(l))})})}return t?a(U,{elementType:"span",display:"inline",variant:"supporting-01",color:"secondaryText",dataAttributes:{"data-automation":"trip_card_description"},children:[i(ei,{theme:"none",href:s.route.url,target:"_blank",children:i("span",{className:iN.reviewSnippet,children:`"${c.trim()}"`})})," - ",i(ei,{theme:"standalone",href:s.userProfile.route.url,target:"_blank",children:s.userProfile.displayName})]}):null},[c,s?.userProfile?.displayName,s?.userProfile?.route?.url,s?.route?.url,r,n,d,o,e]);return a("div",{className:iN.descriptionContainer,children:[p,u]})},iS=e=>e$(ev(eX(e)||new Date,1)),iD=({baseUrl:e,geoId:t,tripDate:i})=>{if(!e)return"";var a=i?.exactDate?.endDate&&i.exactDate.endDate===i.exactDate.startDate?iS(i.exactDate.endDate):i?.exactDate?.endDate;return`${e}${t?`-g${t}`:""}${i?.exactDate?.startDate&&a?`?staydates=${eY(i.exactDate.startDate)}_${eY(a)}`:""}`},ix=(e,t,i,a,r)=>ed({latitude:e,longitude:t},{latitude:i,longitude:a},r),iM={container:"NabfV Re Pj PX Pw PJ B1 Z BB z",cardHeader:"FyeBt Fo G",header:"weMCn G",headerMedia:"avaGt w",title:"AxtVP MH o",locationInfo:"VfMrM K e",amenities:"oatnA K",amenity:"xhvHV",amenityIcon:"qlWmS S6",description:"Hhutp"},iB=e=>e.detail?.__typename==="Hotel"?e.detail?.hotel?.providerStarRating:void 0,iA=({tripId:e,tripDate:t,hotelLocation:r,onClick:n,onIndividualSaveComplete:o})=>{var{localize:d}=f(),s=eh(),c=eg(e),{name:u,locationId:m,locationV2:v,locationDescription:h,photos:g,route:b,reviewSummary:y,reviewSnippet:T,latitude:I,longitude:w}=r,k=es(),{rating:C,count:P}=y||{},{bestAwardForActiveYearV2:D,hierarchy:x}=v||{},M=x?.naturalParent?.geocode?.latitude,B=x?.naturalParent?.geocode?.longitude,A="MOBILE"===S(),E=e=>{n?.(),c({itemName:"HotelsListClick",customData:{itemId:r.locationId,clickedOn:e}})},{price:L,loading:O}=eG({location:r,checkInDate:t?.exactDate?.startDate||"",checkOutDate:t?.exactDate?.endDate||"",boldPrice:!0},!r?.locationId||!t?.exactDate?.startDate||!t?.exactDate?.endDate),R=iD({baseUrl:b?.url,tripDate:t}),j=(t,i)=>{s({itemName:"SuccessfulItemSave",itemType:"ViewGAI",customData:{itemId:m,gaiTripId:e,destinationTripId:i,saveCreationMethod:"GAI",isNew:"CREATED"===t}})},z=iB(r),V=l(()=>{if(!M||!B||!I||!w)return null;var e=ix(M,B,I,w,k);return e?"MILES"===k?i(_,{id:"trips_for_you_card_hotel_distance_from_center_miles",args:{distance:e.toFixed(1)}}):i(_,{id:"trips_for_you_card_hotel_distance_from_center_km",args:{distance:e.toFixed(1)}}):null},[M,B,I,w,k]),{setSelectedItemId:F}=N(),W=p(()=>{A||F(m)},[F,m,A]),Z=p(()=>{F(null)},[F]),Y=l(()=>{if(r?.detail?.__typename==="Hotel"){var[e,t]=[...r.detail?.amenityList?.highlightedAmenities?.propertyAmenities??[],...r.detail?.amenityList?.nonHighlightedAmenities?.propertyAmenities??[]].reduce(([e,t],i)=>(i?.tagId&&i.tagId in tC?e.push(i):i?.tagId&&t.push(i),[e,t]),[[],[]]);return[...e,...t.slice(0,Math.max(0,3-e.length))].filter(e=>!!e?.amenityNameLocalized&&!!e?.tagId).map(e=>{var t=eq(eF(e));return a("div",{className:iM.amenity,children:[i("span",{className:iM.amenityIcon,children:t?i(t,{}):null}),i(U,{variant:"supporting-01",elementType:"span",children:e.amenityNameLocalized})]},String(e.tagId))})}return[]},[r]);return a("div",{"data-automation":"intermediate_hotel_card",className:iM.container,onMouseEnter:W,onMouseLeave:Z,children:[a("div",{className:iM.header,children:[g?.[0]?.photoSizes?i("div",{className:iM.headerMedia,children:i(J,{award:D?.year?i(ea,{size:"large",color:"BOTB"===D.awardType?"yellow":"green",year:D.year}):void 0,action:i(ec,{id:m??0,type:"location",onSaveComplete:o,viewTripOpensNewTab:!0,onViewTripToastVisible:j,onAutosavedToTripToastVisible:j,sourceTripId:e,creationMethod:"GENERATIVE_AI"}),children:i(ei,{"data-automation":"intermediate_hotel_card_image",display:"block",theme:"image",href:R,target:"_blank",onClick:()=>E("image"),children:i(et,{source:g[0].photoSizes,width:140,height:140,aspectRatio:"1:1"})})})}):null,a("div",{children:[a("div",{className:iM.cardHeader,children:[i(ei,{href:R,onClick:()=>E("title"),target:"_blank",theme:"standalone",children:i(U,{variant:"title-04",dataAttributes:{"data-automation":"intermediate_hotel_card_title"},children:i("span",{className:iM.title,children:u})})}),C&&P&&i(ei,{href:`${R}#REVIEWS`,onClick:()=>E("review-data"),target:"_blank",theme:"standalone",children:i(eD,{size:"small",rating:C,numReviews:P})})]}),a("div",{className:iM.locationInfo,children:[V&&i(eV,{content:V,icon:G,dataAttributes:{"data-automation":"intermediate_hotel_card_distance"}}),!!z&&i(eV,{content:d.string("trips_for_you_card_hotel_class",{hotelClass:z}),icon:eO}),O?i(q,{width:"100%",height:"17px"}):L&&i(U,{variant:"supporting-01",dataAttributes:{"data-automation":"intermediate_hotel_card_price"},children:L})]})]})]}),Y?.length||h?i(H,{marginTop:"spacing-03",marginBottom:"spacing-03"}):null,Y.length?i("div",{className:iM.amenities,children:Y}):null,(h||T)&&i("div",{"data-automation":"intermediate_hotel_card_description",className:iM.description,children:i(tk,{numLinesToShow:5,descriptionText:h||"",isAIGenerated:!!(T?.text&&!T?.review),reviewSnippet:T})})]})},iE={shelf:"NTMtN",carousel:"lrZNb f Q3 _t _h",arrowLeft:"Ahasf X0 Z1",arrowRight:"tRvns X0 Z1"},iL=({icon:e,label:t,onClick:a})=>i(M,{icon:e,variant:"primary-border","aria-label":t,onClick:a}),iO=({tripId:e,children:t})=>{var r=eg(e),[n,l,o,d]=eJ({threshold:100}),{localize:s}=f(),c=e=>{if(l){r({itemName:"ScrollHotelsListShelf"});var t=l.children[0],i=l.children[1].offsetWidth+t.offsetLeft;l.scrollBy({left:("LEFT"===e?-1:1)*i,behavior:"smooth"})}};return a("div",{className:iE.shelf,children:[i("div",{ref:n,className:iE.carousel,children:t}),o&&i("div",{className:iE.arrowLeft,children:i(iL,{icon:eK,label:s.string("common_Previous"),onClick:()=>c("LEFT")})}),d&&i("div",{className:iE.arrowRight,children:i(iL,{icon:eQ,label:s.string("common_Next"),onClick:()=>c("RIGHT")})})]})},iR=({onClose:e,placesToStay:t,tripId:r,tripDate:n})=>{var l=e_(r);return a("div",{ref:eI(()=>{l({itemName:"HotelsListShelf",customData:{hotelIds:t.flatMap(e=>e.locationId)}})}),children:[a("div",{className:"MJ f k u",children:[i(U,{variant:"title-03",marginRight:"spacing-03",children:i(_,{id:"trips_v2_gai_trip_preview_places_to_stay_heading"})}),i(tw,{onClose:e,tripId:r})]}),i(U,{variant:"body-01",color:"placeholderText",marginBottom:"spacing-04",children:i(_,{id:"trips_v2_gai_trip_preview_places_to_stay_description"})}),i(tP,{tripId:r,children:t.map(e=>i(tN,{hotelLocation:e,tripId:r,tripDate:n},e.locationId))})]})},ij=({geoId:e,tripId:t,tripDate:r})=>{var n=iD({baseUrl:"Hotels",geoId:e,tripDate:r}),l=eg(t),o=e_(t);return a("div",{ref:eI(()=>{o({itemName:"SeeMoreHotels"})}),children:[i(U,{variant:"title-03",marginBottom:"spacing-04",children:i(_,{id:"trips_v2_gai_trip_preview_places_to_stay_heading"})}),a("div",{className:"PQOmJ f Pk PY Px PK Q3 Re",children:[i("div",{className:"HiKTX f F0 u j Re",children:i(eO,{size:24})}),a("div",{children:[i(U,{variant:"body-01",marginBottom:"spacing-01",children:i(_,{id:"trips_v2_gai_places_to_stay_alert_text"})}),i(x,{href:n,onClick:()=>{l({itemName:"ClickSeeMoreHotels"})},target:"_blank",children:i(_,{id:"trips_v2_gai_places_to_stay_alert_link"})})]})]})]})},iz=({onUndo:e,tripId:t})=>{var[r,n]=o(Y),l=eg(t);return p(t=>{var o=i(e1,{onClick:()=>{e(),n(),l({itemName:"UndoHotelsShelfClose",customData:{reason:t}})},children:i(_,{id:"stat_modal_undo"})});r({node:i(Z,{cta:o,children:a(e2,{display:"flex",alignItems:"center",children:[i(e0,{size:24,marginRight:"spacing-03"}),i("span",{children:i(_,{id:"trips_v2_gai_places_to_stay_toast_message"})})]})})})},[n,r,e,l])},iV=({geoId:e,onDismiss:t,onSelectMenuOption:a,onDismissUndo:r,placesToStay:o,tripId:d,tripDate:s})=>{var[c,u]=n("carousel"),{sectionRefMapping:m}=tz(),v=m.get(id(io)),h=tx({onUndo:p(()=>{u("carousel"),r()},[r]),tripId:d}),g=p(e=>{a(),"dont_like_options"===e?u("see-more"):(t(),h(e))},[h,t,a]),_=l(()=>{switch(c){case"carousel":return i(tS,{onClose:g,placesToStay:o,tripId:d,tripDate:s});case"see-more":return i(tD,{geoId:e,tripId:d,tripDate:s});default:return null}},[e,g,o,c,s,d]);return i("div",{ref:v,children:_})},iG=({tripId:e,tripTitle:t,tripDescription:l,geoId:o,geoName:d,days:s,tripDate:u,loading:m,onReady:v,onSaveFeedbackItem:h,onIndividualSaveComplete:g,saveOrViewTripCta:_})=>{var[b,y]=n(!1),[T,I]=n(!1),{showPlacesToStay:w,setSavePlacesToStay:k,placesToStay:C,setShowPlacesToStay:N}=B(),{localize:P}=f();c(()=>{if(l&&b&&!T){var e=setTimeout(()=>{I(!0)},1e3);return()=>clearTimeout(e)}},[b,T,l]);var S=p(()=>{y(!0),v?.()},[v]);return i($,{children:a("div",{children:[a("div",{className:iw.ctaDisclaimerWrapper,children:[a("div",{className:iw.poweredByAI,children:[i("div",{className:iw.iconBrand,children:i(W,{size:16})}),i(U,{variant:"supporting-02",color:"placeholderText",children:P.string("native_gai_trip_powered_by_ai")})]}),!m&&_&&i("div",{className:iw.saveOrViewTripCtaWrapper,children:_("top")})]}),t&&i(U,{variant:"title-02",marginBottom:"spacing-04",dataAttributes:{"data-automation":"trips_gai_preview_trip_title"},children:i(tI,{text:t,onComplete:S})}),(b||!m)&&i(ty,{ready:!!l||!m,placeholder:i(tl,{}),children:!!l&&i(U,{variant:"body-01",dataAttributes:{"data-automation":"trips_gai_preview_trip_description"},children:l})}),w&&!!C?.length&&a(r,{children:[i(H,{marginY:"spacing-04"}),i(tM,{tripId:e,geoId:o,tripDate:u,onDismiss:()=>N(!1),onDismissUndo:()=>{N(!0),k(!1)},onSelectMenuOption:()=>k(!1),placesToStay:C})]}),(T||!m)&&a(r,{children:[i(H,{marginY:"spacing-04"}),s.map(({id:t,title:a,description:r,formattedDescription:n,items:l},s)=>i(tT,{tripId:e,id:t,geoId:o,geoName:d,title:a,formattedDescription:n,fallbackDescription:r,items:l,expandFirstItem:0===s,loading:m,onSaveFeedbackItem:h,onIndividualSaveComplete:g},t))]})]})})};function iq(e){var[t,i]=n(!1);return p((...a)=>{t||(i(!0),e(...a))},[e,t])}var iF={bar:"eAdfK w",fade:"TnzZF",progress:"nDHWc",message:"PXCKk f K o F",spacer:"ghkJD"},iH=({progress:e=0,message:t,"aria-label":r})=>{var[l,o]=n(0),[d,s]=n("LOADING");return 0!==l&&e>l&&o(e),c(()=>{0===l&&o(e)},[l,e]),c(()=>{if(100===l){var e=setTimeout(()=>{s("COMPLETE")},1e3),t=setTimeout(()=>{s("HIDDEN")},2e3);return()=>{clearTimeout(e),clearTimeout(t)}}},[l]),"HIDDEN"!==d?a("div",{className:L(iF.bar,"LOADING"!==d&&iF.fade),role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":l,"aria-label":r,children:[i("div",{className:iF.progress,style:{width:`${l}%`}}),t&&a("div",{className:iF.message,style:{width:`${l}%`},children:[i("span",{className:iF.spacer}),i(U,{variant:"supporting-02",color:"accentPurpleText",children:t})]})]}):null},iW={gaiTrip:"OKHCk",content:"KUkEb",itinerary:"CamCP",map:"PWuLm",mapWrapper:"vNChN",tabBar:"bYkpq QA z",chip:"uXLJv",progressBar:"MYIBl l",closeButton:"imZtv Z1"},iU=({tripId:e,title:t,description:o,days:d,tripDate:s,centerPoint:u,geoId:m,geoName:v,loading:h,progress:b=0,scrollContainerRef:y,onSaveFeedbackItem:C,modalHeader:N,onClose:D,saveOrViewTripCta:x,onIndividualSaveComplete:E})=>{var[L,O]=n(h),R=w(),j=I(),{localize:z}=f(),V="MOBILE"===S(),{showPlacesToStay:G,setShowPlacesToStay:q,setSavePlacesToStay:F,setPlacesToStay:H}=B(),{placesToStay:W,fetching:U}=A({tripId:e});c(()=>{W?.length&&!U&&(q(!0),F(!0),H(W))},[U,W,H,F,q]);var Z=iq(p(()=>{j("TripGaiTripDetails",{date:new Date().toISOString(),timestamp:Date.now(),tripId:e,title:t,titleNarration:o,days:d.map(e=>({day:e.title,dayNarration:e.description,items:e.items.map(e=>({id:e.id,location:e.locationItem?.object?.name,GAIItemNarration:e.gaiNarration,bookableExperienceId:ie(e)}))}))})},[d,o,j,t,e])),Y=iq(p(()=>{j("TripGAITripGenerated",{date:new Date().toISOString(),timestamp:Date.now(),tripId:e})},[j,e]));c(()=>{h||Z()},[h,Z]);var $=p(()=>{Y(),O(!1)},[Y]),X=l(()=>{var e=new Map;return e.set(id(io),g()),d.flatMap(e=>[id(e.id),...e.items.map(t=>is(e.id,t.id))]).reduce((e,t)=>(e.set(t,g()),e),e)},[d]),J=d[0]?X.get(id(d[0].id)):void 0,K=l(()=>[...G?[X.get(id(io))]:[],...d.map(e=>X.get(id(e.id)))].filter(Boolean),[d,G,X]),Q=(t,i)=>{var a=X.get(id(t));a&&(R("TripDetailsDayJump",{tripId:e,dayId:t}),i(a))},ee=p(t=>{var i=d[t];i&&R("TripDetailsScroll",{tripId:e,day:i.title})},[d,R,e]),et=h?Math.min(b,L?20:100):100,ei=et<=85?z.string("trips_gai_entry_finalizing_itinerary"):void 0;return i(P,{children:a(ta,{scrollContainerRef:y,sectionRefMapping:X,children:[J&&!h&&i(tr,{saveOrViewTripCta:x,onActiveTabChange:ee,anchorRef:J,tabSectionRefs:K,tabBar:(e,t)=>a(r,{children:[V?N:null,i(e4,{value:t,fullBleed:!1,children:a("div",{className:iW.tabBar,children:[G&&i("div",{className:iW.chip,children:i("div",{children:i(e3,{widthVariant:"full",selected:0===t,onClick:()=>Q(io,e),"aria-label":z.string("trips_v2_gai_trip_preview_places_to_stay_heading"),dataAttributes:{"data-automation":"trips_gai_preview_trip_places_to_stay_tab"},children:i(_,{id:"trips_v2_gai_trip_preview_places_to_stay_heading"})})})},io),d.map((a,r)=>i("div",{className:iW.chip,children:i(e3,{widthVariant:"full",selected:G?r+1===t:r===t,onClick:()=>Q(a.id,e),"aria-label":a.title?.toString(),dataAttributes:{"data-automation":"trips_gai_preview_trip_day_tab","data-automation-day-id":a.id},children:a.title})},a.id))]})})]})}),a("div",{className:iW.gaiTrip,children:[i("div",{className:iW.progressBar,children:i(tA,{progress:et,message:ei})}),i(T,{children:a("div",{className:iW.content,children:[i("div",{className:iW.itinerary,children:i(tB,{tripId:e,tripTitle:t,geoId:m,geoName:v,tripDescription:o,days:d,tripDate:s,loading:h,onReady:$,onSaveFeedbackItem:C,onIndividualSaveComplete:E,saveOrViewTripCta:x})}),a("div",{className:iW.map,children:[V?i("div",{className:iW.closeButton,children:i(M,{onClick:D,icon:k,size:"small","aria-label":z.string("common_Close"),dataAttributes:{"data-automation":"trips_gai_modal_close_button_map"}})}):null,i("div",{className:iW.mapWrapper,children:i(tf,{tripId:e,days:d,centerPoint:u,geoId:m,loading:h,hideMarkers:L})})]})]})})]})]})})},iZ=({tripId:e,onSaveFeedbackItem:t,saveOrViewTripCta:a,onIndividualSaveComplete:r})=>{var{trip:n,fetching:l}=tv(e,null,"COMPLETE");if(!n)return null;var{title:o,description:d,days:s,centerPoint:c,geoId:p,geoName:u,progress:m,tripDate:v}=n;return i(iU,{tripId:e,title:o,description:d,days:s,tripDate:v,centerPoint:c,geoId:p,geoName:u,loading:l,onSaveFeedbackItem:t,progress:m,saveOrViewTripCta:a,onIndividualSaveComplete:r})};function iY({trip:e,saveOrViewTripCta:t,...a}){return e?i("div",{className:"vnYqC f e Q2",children:i(iU,{title:e.title,description:e.description,days:e.days,tripDate:e.tripDate,centerPoint:e.centerPoint,geoId:e.geoId,geoName:e.geoName,progress:e.progress,saveOrViewTripCta:t,...a})}):null}function i$({tripId:e,tripTitle:t,placesToStay:r,onSave:n,onItemClick:l,onCreateTripInputChange:o,variant:d="light",position:s}){var c=w(),p=I();return i(e6,{saveObject:{id:e,type:"gaiTrip"},additionalItemReferences:r?.reduce((e,t)=>(t.locationId&&e.push({id:t.locationId.toString(),type:"location"}),e),[]),initialTripTitle:t,active:!1,object:null,onComplete:(e,t)=>n(t),onItemClick:l,onCreateTripInputChange:o,onViewTripToastVisible:(t,i)=>{p("SuccessfulItinerarySave",{gaiTripId:e,destinationTripId:i,saveCreationMethod:"GAI",isNew:"CREATED"===t})},showPlacesToStay:!!r?.length,skipCreateTripTracking:!0,children:t=>i(D,{onClick:()=>{c("TripDetailsSaveItinerary",{tripId:e,position:s}),t()},variant:"light"===d?"gai":"gai-dark",dataAttributes:{"data-automation":"trips_gai_preview_trip_save_itinerary_button"},children:a("div",{className:"f u j",children:[i(e8,{marginRight:"spacing-01"}),i(_,{id:"trips_gai_modal_save_itinerary_cta"})]})})})}var iX={__key:0x98d4684e840f,id:"98d4684e840fa57a",loc:{},definitions:[]},iJ=e=>"COMPLETE"===e,iK=e=>"ERROR"===e||"UNKNOWN"===e,iQ=(e,t)=>iJ(e)?"COMPLETE":iK(e)?"ERROR":t?"LOADING":"ERROR",i0=e=>{var[{fetching:t,data:i}]=e9({query:iX,variables:{request:{tripId:e||0}},isResultComplete:({data:e})=>{var t=e?.Trips_getGeneratedTripStatus?.status??null;return iJ(t)||iK(t)},pollIntervals:tL,pause:!e}),a=i?.Trips_getGeneratedTripStatus?.status??null,r=i?.Trips_getGeneratedTripStatus?.lastUpdated??null,n=iQ(a,t);return l(()=>({status:n,lastUpdated:r}),[n,r])},i1=({data:e})=>i("pre",{children:JSON.stringify(e,null,2)}),i2=({tripId:e})=>{var{path:t}=e7(),[{data:r}]=eL({query:t7,variables:{tripIds:[e??0],currency:y()},requestPolicy:"cache-only",pause:!e}),n=r?.Trips_getTrips?.[0];if(!n)return i(U,{variant:"body-01",children:"Loading trip details..."});var{id:l,title:o,tripLocations:d,generatedTripRequest:s}=n||{};return a("div",{children:[i(U,{variant:"title-04",marginBottom:"spacing-03",children:o}),i(U,{variant:"title-05",marginBottom:"spacing-01",children:"Trip ID"}),i(U,{variant:"body-01",children:i(ei,{theme:"inline",href:`${t}#/TripBuilder/${l}`,children:l})}),i(H,{marginY:"spacing-03"}),i(U,{variant:"title-05",marginBottom:"spacing-01",children:"Requested Params"}),i(i1,{data:s}),i(H,{marginY:"spacing-03"}),i(U,{variant:"title-05",marginBottom:"spacing-01",children:"Trip Locations"}),i(i1,{data:d})]})},i3=({tripId:e})=>(e5("GAI Trip",l(()=>i(i2,{tripId:e}),[e])),null);return e({GaiTripPreview:iY,SaveToTripButton:i$}),[()=>{te=d(null),tt=tO,ti=d(null),ta=tj,tr=u(tF),tn=tW,tl=tZ,to=tY,td=t$,tc=(ts=[{value:"dislike_recommendation",label:i(_,{id:"trips_gai_feedback_bad_recommendation"})},{value:"wrong_description",label:i(_,{id:"trips_gai_feedback_wrong_description"})},{value:"unrelated_link",label:i(_,{id:"trips_gai_feedback_unrelated_page"})}]).map(e=>e.value),tp=t4,tu=t9,tm=t5,tv=il,th=m(function({step:e,title:t,content:r,isOpen:n,onExpandCollapseClick:l,onMouseEnter:o,onMouseLeave:d,isConnected:s=!0,dataAttributes:c},p){var u=i("div",{className:ic.marker,children:i(U,{variant:"button-03",children:e})});return a("div",{className:ic.container,ref:p,onMouseEnter:o,onMouseLeave:d,children:[a("div",{className:ic.sidebar,children:[u,i("div",{className:s?ic.bar:void 0})]}),i("div",{className:ic.card,...c?.card,children:i(X,{question:a(U,{variant:"title-04",elementType:"span",dataAttributes:{"data-automation":"trips_gai_preview_trip_day_item_title"},children:[i("span",{className:ic.titleMarker,children:u}),t]}),answer:r,answerType:"custom",onExpandCollapseClick:l,isExpanded:n})})]})}),tg=ip,t_=iu,tf=iv,tb=ih,ty=i_,tT=iy,tI=iI,tw=iC,tk=iP,tC={[ez.FreeBreakfast]:i(_,{id:"hotel_amenity_free_breakfast"})},tN=iA,tP=iO,tS=iR,tD=ij,tx=iz,tM=iV,tB=iG,tA=iH,tE=iZ,tL=[...Array(15).fill(2e3),...Array(10).fill(3e3),...Array(12).fill(5e3),...Array(42).fill(1e4)],e({GaiTripDebugger:i3,GaiTripPreview:iY,IntermediateScreen:tE,SaveToTripButton:i$,getBookableExperienceId:ie,useGetGeneratedTrip:tv,useGetGeneratedTripStatus:i0})},[e=>(i=e.jsx,a=e.jsxs,r=e.Fragment),e=>(n=e.useState,l=e.useMemo,o=e.useContext,d=e.createContext,s=e.useRef,c=e.useEffect,p=e.useCallback,u=e.memo,m=e.forwardRef,v=e.Suspense,h=e.Fragment,g=e.createRef),e=>(_=e.default,f=e.useLocalize,b=e.useIntlFormatter,y=e.useCurrency),e=>T=e.default,e=>(I=e.usePreviewImpressionLogger,w=e.usePreviewInteractionLogger),e=>k=e.default,e=>(C=e.default,N=e.useTripsMapContext,P=e.TripsMapProvider),e=>S=e.useViewportCategory,e=>(D=e.default,x=e.BorderlessButton,M=e.CircularButton),e=>(B=e.usePlacesToStayContext,A=e.useFetchPlacesToStay),e=>E=e.useKeyboardNavigationMode,e=>L=e.default,e=>O=e.default,e=>R=e.default,e=>j=e.ErrorBoundary,e=>z=e.ModalBase,e=>V=e.default,e=>G=e.default,e=>q=e.Skeleton,e=>F=e.default,e=>H=e.default,e=>W=e.default,e=>U=e.default,e=>(Z=e.ToastItem,Y=e.Toast,$=e.ToastProvider),e=>X=e.ControlledCollapsibleListItem,e=>(J=e.CardMedia,K=e.FlexCard,Q=e.CardContent,ee=e.CardText),e=>et=e.default,e=>ei=e.default,e=>ea=e.default,e=>er=e.default,e=>(en=e.TripLocationIconContent,el=e.getLocationReviewData,eo=e.CardHeaderElement,ed=e.haversineDistance,es=e.useDistanceUnit),e=>ec=e.default,e=>(ep=e.getSATDModalSaveObject,eu=e.getLocationPhotos),e=>(em=e.isLocationItemObject,ev=e.addDays),e=>(eh=e.useImpressionLogger,eg=e.useViewGaiInteractionLogger,e_=e.useViewGaiImpressionLogger),e=>ef=e.default,e=>eb=e.default,e=>(ey=e.ToastProvider,eT=e.useToast),e=>eI=e.useOnVisible,e=>ew=e.default,e=>ek=e.default,e=>eC=e.useVDOMPortal,e=>eN=e.ModalContainer,e=>eP=e.TextInput,e=>eS=e.Checkbox,e=>eD=e.BubbleRatingWithReviewCount,e=>ex=e.default,e=>eM=e.default,e=>(eB=e.default,eA=e.getMarginProps,eE=e.margin),e=>eL=e.useQuery,e=>eO=e.default,e=>eR=e.default,e=>ej=e.PopoverMenu,e=>ez=e.amenityTags,e=>eV=e.IconDetail,e=>eG=e.useHotelPrice,e=>(eq=e.getAmenityIcon,eF=e.getAmenityIconName),e=>eH=e.ReadMore,e=>eW=e.CdnImage,e=>eU=e.Avatar,e=>eZ=e.stringHash,e=>eY=e.formatDateParam,e=>(e$=e.dateToISOString,eX=e.isoStringToDate),e=>eJ=e.useCanScroll,e=>eK=e.default,e=>eQ=e.default,e=>e0=e.default,e=>e1=e.default,e=>e2=e.Box,e=>e3=e.ChipButton,e=>e4=e.TabBar,e=>e8=e.default,e=>e6=e.TripFlowSelector,e=>e9=e.usePollingQuery,e=>e5=e.useDebugPane,e=>e7=e.useRoute]]},["21h32l","o4yt4q","7thqz4","94v69w","ibebqy","qkjm8h","amwhbz","ys6v1o","jppfwt","aj74qn","2r4qug","fkji80","d6vj30","dsbyen","83pm0d","uzmmz7","7nq86i","bp96i9","qndsds","ndszpi","covaqn","qk22ay","essqvy","tr3542","ahn2ts","6m9vgr","34bu7w","lr6tb6","p9ucm8","2rns1i","9l2zsy","dpzonz","xznza0","r6ayw2","sa2a6q","s1ymgp","ec91du","nntg4s","3btuy0","wehxiu","n4zdla","4euaes","i3sz5h","u3aiot","frf6ac","bkeq24","u47wjb","w43m8k","gw8uw6","mqwhqn","c5q3iu","43er8k","s2gl90","ztz79u","70j2tf","vtj79r","he3p3w","wgun1f","s6q22n","ljqkwp","eww825","iyqcwg","o5y7tg","c4482w","a6i9w3","6qmqhw","d3i8k1","6g4avl","lyyh8d","b1cljk","227h6c","l75rcq","9rb8bq","fbuhsy","uvk21c","fgwvq1"]]);
