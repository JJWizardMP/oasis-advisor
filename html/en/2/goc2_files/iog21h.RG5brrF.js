(this.$WP=this.$WP||[]).push(["iog21h",(e,t)=>{var s,r,i,o,a,n,l,d,g,h,c,u,p,S,f,v,m,b,A,I,T,E,w,y,R,C,P,B,M,x,k,D,O,L,q,_,j,z,F,H,U,N,$,G,K,W,V,Q,Y,Z,X,J,ee,et,es,er,ei,eo,ea,en,el,ed,eg,eh,ec,eu,ep,eS,ef,ev,em,eb="ads.testMode",eA=()=>{var[e,t]=i(!1),s=o(e=>{t(e),C.set(eb,e)},[]);return a(()=>{t(!0===C.get(eb));var e=C.addListener(eb,t);return()=>e()},[]),[e,s]};function eI(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function eT(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var eE=["2mdn.net","amazon-adsystem.com","ampproject.org","celtra.com","doubleclick.net","google.com","googletagservices.com","googlesyndication.com","adsafeprotected.com"];function ew(e){return()=>requestIdleCallback(e,{timeout:15})}var ey=({width:e,height:t})=>`${e}.${t}`,eR=([e,t])=>`${e}.${t}`;function eC(e){return t=>(e.has(t)||e.set(t,t.getSizes().filter(e=>"string"!=typeof e).map(e=>[e.getWidth(),e.getHeight()])),e.get(t))}function eP(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function eB(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function eM(e,t){globalThis.apstag._Q.push([e,t])}function ex(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var ek=["1x1"],eD=[],eO="ads.disableFraudDetection";function eL(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function eq(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var e_=({onDisableTestMode:e})=>s("div",{className:"PLEmQ D S4 q R2",children:["Ad test mode enabled",r("button",{onClick:e,className:"oYrIp _S Wb B- Q",children:"[Disable]"})]}),ej=({children:e})=>{var[t,s]=i({}),o=l(()=>({targeting:t,setTargeting:s}),[t]);return r(eo.Provider,{value:o,children:e})},ez={__key:0xd194875f0fc0,id:"d194875f0fc023a6",loc:{},definitions:[]},eF={MOBILE:"mobileweb",TABLET:"tablet",DESKTOP:"desktop"},eH=e=>{var{params:t}=v();return"Articles"===e&&"forumPostId"in t&&t.forumPostId?t.forumPostId.toString():"Trips"===e&&"tripId"in t&&t.tripId?t.tripId.toString():"geoId"in t&&t.geoId?"detailId"in t&&t.detailId?t.detailId.toString():t.geoId.toString():null},eU=e=>{var t=l(()=>Array.from(Object.keys(e).reduce((t,s)=>{var{isThorTest:r,thorExperimentKey:i,thorBucket:o}=e[s];return r&&i&&o&&t.add(i),t},new Set)),[e]),s=L({experimentKeys:t},0===t.length);return l(()=>{var t={};return Object.keys(e).forEach(r=>{var{isThorTest:i,thorExperimentKey:o,thorBucket:a}=e[r],n=i&&o&&a&&s?.[o]===a;(!i||n)&&(t[r]=e[r])}),t},[e,s])},eN=()=>{var e=D(),{page:t,path:s}=v(),r=O(),i=eF[r],o=eH(t),a=t&&e&&r,[{data:n}]=x({query:ez,variables:{page:t,locale:e,platform:i,id:o,urlRoute:s},pause:!a});return eU(l(()=>{var e=n?.AdMissionControl_getPageSlotSettings?.[0]?.slots,t={};return e&&e.filter(Boolean).forEach(e=>{var s={};e.overrides.filter(Boolean).forEach(e=>{var t=new Map;e.settings?.forEach(e=>{e?.key&&e?.value&&t.set(e.key,e.value)}),s.settings=t,e.isThorTest&&!s.isThorTest&&(s.isThorTest=e.isThorTest),e.thorExperimentKey&&!s.thorExperimentKey&&(s.thorExperimentKey=e.thorExperimentKey),e.thorBucket&&!s.thorBucket&&(s.thorBucket=e.thorBucket)}),Object.keys(s).length>0&&(t[e.slot]=s)}),t},[n]))},e$=({children:e})=>{var t=en(),s=l(()=>({pageAdSlotSettings:t}),[t]);return r(el.Provider,{value:s,children:e})},eG=({children:e})=>{var[t,s]=i(!1),[o,a]=i(0),n=l(()=>({isHorizonAdSticky:t,setIsHorizonAdSticky:s,horizonAdHeight:o,setHorizonAdHeight:a}),[t,o]);return r(ed.Provider,{value:n,children:e})},eK={__key:0xb4613962d98d,id:"b4613962d98df032",loc:{},definitions:[]},eW={MOBILE:"mobileweb",TABLET:"tablet",DESKTOP:"desktop"},eV=()=>{var{page:e}=v(),t=O(),[{data:s}]=x({query:eK,variables:{page:e,platform:eW[t]},pause:!(e&&t)});return l(()=>{var e=s?.AdMissionControl_getAdSlotsListForPageAndPlatform?.[0]?.slots,t=[];return null==e?null:(e.filter(Boolean).forEach(e=>{t.push(e)}),t)},[s])},eQ=["Hotels","HotelsFusion","HotelsList","HotelsNear","SmartDeals","Hotel_Review","HotelHighlight"],eY=({children:e})=>e,eZ=({children:e})=>{var{page:t}=v(),o=eQ.includes(t)?0:23,n=w(),l=y(),{browser:h,userAgentCategory:c}=b(),u=S(),p=A(),f=m(),[R,C]=i(null),[P,x]=i(!0);em(P);var[k,D]=eA(),O=eh(),L=I();e7(),e6(f);var _="MOBILE"===c?.5:.15;return a(()=>(null!==o&&null!==O&&null!==n&&d(()=>{var e="MOBILE"===c?window.innerHeight:window.innerHeight/2,t=window.innerHeight*_,s=o>0,r={userAgentCategory:c,fetchMargin:`${e}px`,renderMargin:`${t}px`,browserFamily:h.family,domainName:p,recordScriptLoadFailure:L,headerBiddingTimeout:1e3,isSRAEnabled:s,fetchTimeout:3e3,renderMarginPercentage:s?o:15,mobileScaling:3.33};k?C(new Y(r)):B(M.TARGETING,()=>{r={...r,hasTargetingConsent:!0},x(!0);var e=[],t=eC(new WeakMap);e.push(new G(r,t)),e.push(new $(r,t)),e.push(new K(r,t)),n&&e.push(new Q(r)),C(new V(r,e,O))},()=>{r={...r,hasTargetingConsent:!1},C(new N(r)),x(!1)})}),()=>{C(null)}),[h,c,k,p,L,_,n,o,O]),s(eu.Provider,{value:R,children:[r(T,{isRubiconEnabled:!0}),r(q,{}),s(ej,{children:[r(E,{children:r(g,{children:u&&r(ec,{testMode:k,onTestModeChange:D})})}),k&&r(ei,{onDisableTestMode:()=>D(!1)}),r(ep,{children:r(e$,{children:l?r(eG,{children:e}):e})})]})]})},eX={__key:0xdc96a6b0c648,id:"dc96a6b0c64832fa",loc:{},definitions:[]};function eJ(){var e=f(),[t,s]=i(null);return(a(()=>{s(C.get("adTargetingUserBucketOverride")??null)},[]),e)?null!==t?t:Math.abs(H(e)%100).toString():"-1"}var e0=()=>{var{page:e,params:t}=v();return l(()=>{if("TravelersChoice"!==e)return{travelersChoiceCategory:null,travelersChoiceGeoId:null};var s="args"in t&&t.args||"";return{travelersChoiceCategory:ef.has(s)?s.toLowerCase():null,travelersChoiceGeoId:"geo"in t&&t.geo&&t.geo.toString()||null}},[e,t])},e1="ads.first_viewed_page_uid",e2=e=>e.toISOString().substring(0,10),e3=(e,t)=>l(()=>{if(e.includes("Fusion")){var s;switch(e){case"AttractionsFusion":s="Attractions";break;case"AttractionProductsFusion":s="Attraction_Products";break;case"HotelsFusion":s="Hotels";break;case"HotelsListFusion":s="HotelsList";break;default:s=e}return"MOBILE"===t?`Mobile${s}`:s}return e},[e,t]),e5=e=>!(e?.pagee||e?.filters?.length>0),e9=(e,t)=>l(()=>("Attractions"===e||"MobileAttractions"===e)&&e5(t)?"attract_cover":null,[e,t]),e4=()=>{var{page:e,params:t}=v(),s=m(),{browser:r,userAgentCategory:o}=b(),n=j(),{hotels:l}=z(),d=e3(e,o),g=e9(d,t),{targeting:h}=u(ea),c=F(),[p,S]=i(null),{theme:f}=U(),{travelersChoiceCategory:A,travelersChoiceGeoId:I}=e0(),T="geoId"in t&&t.geoId||0,E="detailId"in t&&t.detailId||0,w=eJ(),[{fetching:y,data:R}]=x({query:eX,variables:{pageAdsRequestInput:{hotelTravelInfo:l?.checkInDate&&l.checkOutDate&&{checkInDate:e2(l.checkInDate),checkOutDate:e2(l.checkOutDate),defaultDates:l.defaultDates}||null,locationId:E||T,pageType:d,browserType:r.family,userAgentCategory:o,pageName:e}}});return a(()=>{var e=R?.gptInfo?.[0];if(!y&&e){var{pageLevelTargeting:t,adBase:r,ppid:i}=e;if(t&&r){var o=Object.fromEntries(t.map(e=>{var{key:t,value:s}=e||{};return t&&s?[t,[...s]]:null}).filter(Boolean)),a=Object.fromEntries(Object.entries(h).map(([e,t])=>[e,Array.isArray(t)?t:[t]])),l=_.get(e1);return l||_.set(e1,`${s}`),S({...o,...a,pv_id:[s],sess:[n||null],adBase:r,ppid:i,userBucket:String(w),theme:f.toLowerCase(),cover:g,first_impression:l===s?"true":"false",logged_in:null!==c?"true":"false",...A&&{tc_category:A},...I&&{tc_geo:I}}),()=>{S(null)}}}},[R,y,s,n,h,w,g,c,f,A,I]),p};function e6(e){a(()=>{globalThis.googletag&&globalThis.googletag.cmd.push(()=>{globalThis.googletag.pubads().updateCorrelator()})},[e])}function e7(){var e=R();a(()=>{globalThis.googletag&&globalThis.googletag.cmd.push(()=>{globalThis.googletag.setConfig({adExpansion:{enabled:e}})})},[e])}var e8={__key:0x7e232d3cbc21,id:"7e232d3cbc211ec6",loc:{},definitions:[]},te=e=>{var t=k(),s=p(Date.now().toString());a(()=>{e||t.query(e8,{request:[{timestamp:s.current}]},{requestPolicy:"network-only"}).toPromise()},[e,t])};return e({createSlotSizeOracle:eC,u:eJ,useGoogleTagSetConfig:e7,useGoogleTagUpdateCorrelator:e6}),[()=>{Z=Object.freeze({GPT:{url:"//securepubads.g.doubleclick.net/tag/js/gpt.js",name:"GPT",consentRequired:!1},RUBICON_DYNAMIC:{url:"//micro.rubiconproject.com/prebid/dynamic/13406.js",name:"RUBICON_DYNAMIC",consentRequired:!0},AMAZON_PREBID:{url:"//c.amazon-adsystem.com/aax2/apstag.js",name:"AMAZON_PREBID",consentRequired:!0},BRAND_METRICS:{url:"https://cdn.brandmetrics.com/tag/632e0f7a807b443aa4539a7fc1ca3275/tripadvisor.js",name:"BRAND_METRICS",consentRequired:!0}}),X=class{getScriptSources(){return this.scriptSources}getConsent(){return new Promise(e=>{B(M.TARGETING,()=>e(!0),()=>e(!1))})}observe(e,t="0px"){return new Promise(s=>{var r=new IntersectionObserver(e=>{e.reduce((e,t)=>e||t.isIntersecting,!1)&&(r.disconnect(),s())},{rootMargin:t,threshold:0});r.observe(e)})}loadScripts(){return this.loadPromise||(this.scriptSources,this.loadPromise=this.getConsent().then(e=>Promise.all((e?this.scriptSources:this.scriptSources.filter(e=>!e.consentRequired)).map(e=>P(e.url,"TAPS")))).then(()=>console.debug("ScriptLoader: scripts are loaded")).catch(e=>(this.loadPromise=null,this.scriptSources,this.recordScriptLoadFailure(this.scriptSources.map(e=>e.name)),Promise.reject(e)))),this.loadPromise}load(e,t,s){return t||"undefined"==typeof IntersectionObserver?this.loadScripts():Promise.all([this.observe(e,this.fetchMargin).then(()=>this.loadScripts()),this.observe(e,s||this.renderMargin).then(()=>console.debug("ScriptLoader:",e,"is in viewport"))])}constructor({fetchMargin:e="0px",renderMargin:t="0px",scriptSources:s,recordScriptLoadFailure:r=()=>{}}){eI(this,"loadPromise",null),eI(this,"fetchMargin",void 0),eI(this,"renderMargin",void 0),eI(this,"scriptSources",void 0),eI(this,"recordScriptLoadFailure",void 0),this.scriptSources=s,this.fetchMargin=e,this.renderMargin=t,this.recordScriptLoadFailure=r}},e("GptAdServer",N=class{getSlots(){return googletag.pubadsReady?(googletag.pubads().getSlots()||[]).map(e=>{var{advertiserId:t,creativeId:s,lineItemId:r,campaignId:i,creativeTemplateId:o}=e.getResponseInformation()||{};return{id:e.getSlotElementId(),targeting:Object.fromEntries(e.getTargetingKeys().map(t=>[t,e.getTargeting(t)])),responseInformation:{isCollapser:t&&55978451===t&&3224294296!==i,advertiserId:t,creativeId:s,lineItemId:r,campaignId:i,creativeTemplateId:o}}}):[]}getSlot(e){return googletag.pubads().getSlots().find(t=>t.getSlotElementId()===e)}getEnhancedSlot(e){if(googletag.pubadsReady){var t=this.getSlot(e);if(t){var{advertiserId:s,creativeId:r,lineItemId:i,campaignId:o,creativeTemplateId:a}=t.getResponseInformation()||{};return{id:t.getSlotElementId(),targeting:Object.fromEntries(t.getTargetingKeys().map(e=>[e,t.getTargeting(e)])),responseInformation:{isCollapser:s&&55978451===s&&3224294296!==o,advertiserId:s,creativeId:r,lineItemId:i,campaignId:o,creativeTemplateId:a}}}}}addEventListener(e){return this.subscriptions.push(e),()=>{var t=this.subscriptions.indexOf(e);t>-1&&this.subscriptions.splice(t,1)}}createSlot(e){var{id:t,elem:s,size:r,position:i,targeting:o,aboveTheFold:a,overrideRenderMargin:n}=e;return googletag.cmd.push(()=>{if(!this.getSlot(t)){var{adBase:e,ppid:s,...a}=o;null!==s&&this.hasTargetingConsent&&(googletag.pubads().setPublisherProvidedId(s),this.ppid=s);var n=[...r.split("|").map(e=>{var t=e.split("x");return[parseInt(t[0],10),parseInt(t[1],10)]}),"fluid"],l=googletag.defineSlot(e,n,t);if(l){if(l.updateTargetingFromMap?.(a),l.setTargeting("refreshCount","0"),!l.getTargetingKeys?.()?.length){this.broadcastEmptySlot(t);return}l.setForceSafeFrame(!1),l.addService(googletag.pubads()),l.setCollapseEmptyDiv(!0);var d=this.slotsCreated.get(i);if(d?.created||this.slotsCreated.set(i,{slotId:t,created:!0,requested:!1}),this.slotUpdateTimes.has(t)||this.slotUpdateTimes.set(t,Date.now()),this.isSRAEnabled&&(!this.hasSRAAlreadyHappened||"horizon"===i||d?.requested)){if("horizon"!==i||this.horizonCreated){this.lastIdCreated=t;var g=!0;this.slotsCreated.forEach(({created:e})=>{e||(g=!1)}),this.isAllSlotsCreated=g,g&&this.triggerSRA(t,i)}else this.horizonCreated=!0,googletag.pubads().enableSingleRequest(),googletag.enableServices(),this.refreshSlot(t)}else googletag.display(t)}}}),this.scriptLoader.load(s,a||this.isSRAEnabled,n).then(()=>{this.isSRAEnabled||this.refreshSlot(t)}).catch(()=>{this.broadcastEmptySlot(t)}),{addEventListener:e=>(this.slotSubscriptions[t],this.slotSubscriptions[t]=e,()=>{delete this.slotSubscriptions[t]})}}triggerSRA(e,t){googletag.cmd.push(()=>{if(this.hasSRAAlreadyHappened){if(this.getSlot(e)){var t=this.slotUpdateTimes.get(e);(!t||t<=Date.now()-15e3)&&this.refreshSlot(e)}else googletag.display(e);return}setTimeout(()=>{googletag.pubads().enableSingleRequest(),googletag.enableServices(),googletag.display(e),this.hasSRAAlreadyHappened=!0},0)})}refreshSlot(e){this.broadcastRefreshStart(e),googletag.cmd.push(()=>{var t=this.getSlot(e);t&&(this.slotUpdateTimes.set(e,Date.now()),googletag.pubads().refresh([t],{changeCorrelator:!1}),t.setTargeting("refreshCount",String(parseInt(t.getTargeting("refreshCount")[0],10)+1)))})}destroySlot(e){googletag.cmd.push(()=>{var t=this.getSlot(e);t&&(googletag.destroySlots([t]),this.subscriptions.forEach(e=>e()))})}broadcastRefreshStart(e){this.slotSubscriptions[e]?.({},"slotRefreshStart")}broadcastEmptySlot(e){this.slotSubscriptions[e]?.({isEmpty:!0,isLoaded:!0,isRendered:!0},"forcedEmpty")}constructor({fetchMargin:e,renderMargin:t,browserFamily:s,recordScriptLoadFailure:r,isSRAEnabled:i,fetchTimeout:o,renderMarginPercentage:a,mobileScaling:n,hasTargetingConsent:l},d){eT(this,"slotSubscriptions",{}),eT(this,"subscriptions",[]),eT(this,"ppid",null),eT(this,"scriptLoader",void 0),eT(this,"slotsCreated",void 0),eT(this,"slotUpdateTimes",void 0),eT(this,"isSRAEnabled",void 0),eT(this,"isAllSlotsCreated",void 0),eT(this,"lastIdCreated",void 0),eT(this,"hasSRAAlreadyHappened",void 0),eT(this,"horizonCreated",!1),eT(this,"hasTargetingConsent",void 0),eT(this,"confirmSafeFrame",e=>{try{var t=e?.slot?.getSlotElementId(),s=document.querySelector(`#${t.split(":").join("\\:")} div[id^="google_ads_iframe"] iframe`);if(!(s&&s instanceof HTMLIFrameElement))return;setTimeout(()=>{var t=s.contentDocument;if(t){var r=t.documentElement,i=Array.from(t.getElementsByTagName("iframe")).filter(e=>e.src&&e.src.includes("ad.doubleclick.net/ddm")).length>0,o=r&&!!r.getAttribute("amp-version"),a=!!t.getElementById("google_image_div"),n=e?.slot?.getResponseInformation()?.advertiserId,l=e?.slot?.getResponseInformation()?.campaignId;if(!o&&!a&&(55978451!==n||3224294296===l)&&!i){var d=Array.from(t.scripts).map(e=>e.src.replace(/.*\/\//,"").split(/[/?#]/)[0].split(".").slice(-2).join(".")).filter(e=>-1===eE.indexOf(e)).filter(Boolean);d.length&&console.error("Same-domain ad served with third-party scripts",{slotInfo:e.slot.getResponseInformation(),unapprovedDomains:d})}}},1500)}catch(e){}}),globalThis.googletag=globalThis.googletag||{cmd:[]},this.scriptLoader=new X({fetchMargin:e,renderMargin:t,scriptSources:[Z.GPT],recordScriptLoadFailure:r}),this.isSRAEnabled=i,this.hasTargetingConsent=!!l,this.hasSRAAlreadyHappened=!1,this.isAllSlotsCreated=!1,this.slotsCreated=new Map,this.slotUpdateTimes=new Map,d?.forEach(e=>{this.slotsCreated.set(e,{created:!1,requested:!1})}),googletag.cmd.push(()=>{if(l||googletag.pubads().setPrivacySettings({nonPersonalizedAds:!0}),googletag.pubads().setSafeFrameConfig({allowOverlayExpansion:!0,allowPushExpansion:!0,sandbox:"EDGE"!==s}),googletag.pubads().addEventListener("slotOnload",this.confirmSafeFrame),this.isSRAEnabled){googletag.pubads().enableLazyLoad({fetchMarginPercent:-1,renderMarginPercent:a,mobileScaling:n});var e=setInterval(()=>{this.isAllSlotsCreated||!this.lastIdCreated||this.hasSRAAlreadyHappened?this.hasSRAAlreadyHappened&&clearInterval(e):(clearInterval(e),this.triggerSRA(this.lastIdCreated,""))},o)}else googletag.pubads().disableInitialLoad(),googletag.enableServices();googletag.pubads().addEventListener("slotRequested",e=>{var t=e?.slot?.getSlotElementId();this.slotsCreated.forEach((e,s)=>{e.slotId===t&&e.created&&!e.requested&&this.slotsCreated.set(s,{...e,requested:!0})})}),googletag.pubads().addEventListener("slotRenderEnded",e=>{var t=e?.slot?.getSlotElementId(),{advertiserId:s,campaignId:r}=e?.slot?.getResponseInformation()||{},i={isRendered:!0,isLoaded:!1,isEmpty:55978451===s&&3224294296!==r||e?.isEmpty};t&&i&&this.slotSubscriptions[t]&&(this.slotSubscriptions[t](i,"slotRenderEnded"),this.subscriptions.forEach(e=>e()))}),googletag.pubads().addEventListener("slotOnload",e=>{var t=e?.slot?.getSlotElementId(),s={isLoaded:!0};t&&s&&this.slotSubscriptions[t]&&(this.slotSubscriptions[t](s,"slotOnload"),this.subscriptions.forEach(e=>e()))}),googletag.pubads().addEventListener("slotVisibilityChanged",e=>{var t=e?.slot?.getSlotElementId(),s={isVisible:!!e?.inViewPercentage};t&&s&&this.slotSubscriptions[t]&&(this.slotSubscriptions[t](s,"slotVisibilityChanged"),this.subscriptions.forEach(e=>e()))}),googletag.pubads().addEventListener("impressionViewable",e=>{var t=e?.slot?.getSlotElementId(),s={isImpressionViewable:!0};t&&s&&this.slotSubscriptions[t]&&(this.slotSubscriptions[t](s,"impressionViewable"),this.subscriptions.forEach(e=>e()))})})}}),J=new Set([{width:300,height:250},{width:300,height:600},{width:160,height:600},{width:728,height:90},{width:970,height:250},{width:550,height:1},{width:550,height:310}].map(ey)),ee=new Set([{width:320,height:50},{width:300,height:250}].map(ey)),e("RubiconAdServer",$=class{setContext(e){this.context=e}getScripts(e=!0){return e?[Z.RUBICON_DYNAMIC]:[]}slotSupportsBidding(e){return this.getSlotSizes(e).some(e=>this.rubiconSupportedFormats.has(eR(e)))}refreshSlot(e,t,s){googletag.cmd.push(ew(()=>{var r=this.context?.getSlot(e);if(!r||!this.slotSupportsBidding(r)){t();return}var[i=""]=r.getTargeting("loctype"),[o=""]=r.getTargeting("platform");pbjs.que.push(()=>{pbjs.rp.requestBids({callback:()=>{s()},timeout:this.config.headerBiddingTimeout,gptSlotObjects:[r],data:{inventory:{loctype:i,platform:o}}})})}))}triggerSRARefresh(e,t){googletag.cmd.push(ew(()=>{var s=[];if(this.context?.slotsCreated?.forEach(e=>{if(e.created&&e.slotId){var t=this.context?.getSlot(e.slotId);t&&this.slotSupportsBidding(t)&&s.push(t)}}),0===s.length){e();return}var[r=""]=s[0].getTargeting("loctype"),[i=""]=s[0].getTargeting("platform");pbjs.que.push(()=>{pbjs.rp.requestBids({callback:()=>{t()},timeout:this.config.headerBiddingTimeout,gptSlotObjects:s,data:{inventory:{loctype:r,platform:i}}})})}))}constructor(e,t){eP(this,"context",void 0),eP(this,"config",void 0),eP(this,"rubiconSupportedFormats",void 0),eP(this,"getSlotSizes",void 0),globalThis.pbjs=globalThis.pbjs||{que:[]},this.config=e,this.context=null,this.rubiconSupportedFormats="MOBILE"===e.userAgentCategory?ee:J,this.getSlotSizes=t}}),et={init(){eM("i",arguments)},fetchBids(){eM("f",arguments)},setDisplayBids(){},targetingKeys:()=>[],_Q:[]},es=new Set([{width:300,height:250},{width:300,height:600},{width:160,height:600},{width:728,height:90},{width:970,height:250}].map(ey)),er=new Set([{width:320,height:50},{width:300,height:250}].map(ey)),e("AmazonAdServer",G=class{setContext(e){this.context=e}slotSupportsBidding(e){return this.getSlotSizes(e).some(e=>this.amazonSupportedFormats.has(eR(e)))}refreshSlot(e,t,s){googletag.cmd.push(ew(()=>{var r=this.context?.getSlot(e);if(!r||!this.slotSupportsBidding(r)){t();return}apstag.fetchBids({slots:[{slotID:r.getSlotElementId(),slotName:r.getAdUnitPath(),sizes:this.getSlotSizes(r)}],timeout:this.config.headerBiddingTimeout},()=>{apstag.setDisplayBids(),s()})}))}triggerSRARefresh(e,t){googletag.cmd.push(ew(()=>{var s=[];if(this.context?.slotsCreated?.forEach(e=>{if(e.created&&e.slotId){var t=this.context?.getSlot(e.slotId);t&&this.slotSupportsBidding(t)&&s.push(t)}}),0===s.length){e();return}apstag.fetchBids({slots:s.map(e=>({slotID:e.getSlotElementId(),slotName:e.getAdUnitPath(),sizes:this.getSlotSizes(e)})),timeout:this.config.headerBiddingTimeout},()=>{apstag.setDisplayBids(),t()})}))}constructor(e,t){eB(this,"context",void 0),eB(this,"config",void 0),eB(this,"amazonSupportedFormats",void 0),eB(this,"getSlotSizes",void 0),eB(this,"getScripts",e=>e?[Z.AMAZON_PREBID]:[]),this.config=e,this.context=null,globalThis.apstag=globalThis.apstag||et,this.amazonSupportedFormats="MOBILE"===e.userAgentCategory?er:es,this.getSlotSizes=t,apstag.init({pubID:"3940",adServer:"googletag",videoAdServer:"DFP",useSafeFrames:!0,deals:!0})}}),e("IasAdServer",K=class{setContext(e){this.context=e}getScripts(e=!0){return[]}getUrl(e){return"https://pixel.adsafeprotected.com/services/pub?"+["anId=930842",e.map(e=>`slot={id:${e.getSlotElementId()},ss:[${this.getSlotSizes(e).map(eR).toString()}],p:${e.getAdUnitPath()}}`).join("&"),`wr=${window.innerWidth}.${window.innerHeight}`,`sr=${window.screen.width}.${window.screen.height}`].join("&")}shouldSkipDecorateSlotWithIAS(e){this.adSlotId=e.getSlotElementId();var[,t,s]=this.adSlotId.split(":");return ek.includes(t)||eD.includes(s)}refreshSlot(e,t,s){googletag.cmd.push(ew(()=>{var r=this.context?.getSlot(e);if(!r||this.shouldSkipDecorateSlotWithIAS(r)){t();return}var i=this.getUrl([r]),o=setTimeout(()=>{t()},this.config.headerBiddingTimeout);fetch(i,{credentials:"same-origin",headers:{"X-Purpose":"review"}}).then(e=>e.json()).then(e=>{e.code&&e.message&&(console.error(`Error in IAS response. Code: ${e.code}. Message: ${e.message}`),t()),clearTimeout(o);var{fr:i,brandSafety:a}=e,{id:n,vw:l}=e.slots.slot,d=C.get(eb),g=C.get(eO);d||g||r.setTargeting("fr",i),r.setTargeting("id",n),r.setTargeting("vw",l),r.updateTargetingFromMap(a),s()}).catch(()=>{t()})}))}triggerSRARefresh(e,t){googletag.cmd.push(ew(()=>{var s=[];if(this.context?.slotsCreated?.forEach(e=>{if(e.created&&e.slotId){var t=this.context?.getSlot(e.slotId);t&&!this.shouldSkipDecorateSlotWithIAS(t)&&s.push(t)}}),0===s.length){e();return}var r=this.getUrl(s),i=setTimeout(()=>{e()},this.config.headerBiddingTimeout);fetch(r,{credentials:"same-origin",headers:{"X-Purpose":"review"}}).then(e=>e.json()).then(r=>{r.code&&r.message&&(console.error(`Error in IAS response. Code: ${r.code}. Message: ${r.message}`),e()),clearTimeout(i);var{fr:o,brandSafety:a}=r,{id:n,vw:l}=r.slots.slot,d=C.get(eb),g=C.get(eO);s.forEach(e=>{d||g||e.setTargeting("fr",o),e.setTargeting("id",n),e.setTargeting("vw",l),e.updateTargetingFromMap(a)}),t()}).catch(()=>{e()})}))}constructor(e,t){ex(this,"context",void 0),ex(this,"config",void 0),ex(this,"adSlotId",void 0),ex(this,"getSlotSizes",void 0),this.config=e,this.context=null,this.adSlotId="",this.getSlotSizes=t}}),W=class{constructor(){eL(this,"skippedServers",0),eL(this,"requestedRefresh",!1),eL(this,"bidsFetched",0)}},e("PreBiddingGptAdServer",V=class extends N{createSlot(e){return super.createSlot(e)}skipServerSRA(e,t){var s=this.slotStatuses.get(e)||new W;s.skippedServers<this.servers.length-1?(s.skippedServers+=1,this.slotStatuses.set(e,s)):(s.requestedRefresh=!0,this.slotStatuses.set(e,s),super.triggerSRA(e,t))}doTriggerSRA(e,t){var s=this.slotStatuses.get(e)||new W;if(!s.requestedRefresh){if(s.bidsFetched+=1,s.bidsFetched<this.servers.length-s.skippedServers){this.slotStatuses.set(e,s);return}this.getSlot(e)&&(s.requestedRefresh=!0,this.slotStatuses.set(e,s),super.triggerSRA(e,t))}}triggerSRA(e,t){this.isSRAEnabled&&(this.slotStatuses.set(e,new W),this.servers.forEach(s=>{s.triggerSRARefresh(()=>this.skipServerSRA(e,t),()=>this.doTriggerSRA(e,t))}))}skipServer(e){var t=this.slotStatuses.get(e)||new W;t.skippedServers<this.servers.length-1?(t.skippedServers+=1,this.slotStatuses.set(e,t)):(t.requestedRefresh=!0,this.slotStatuses.set(e,t),super.refreshSlot(e))}doRefresh(e){var t=this.slotStatuses.get(e)||new W;if(!t.requestedRefresh){if(t.bidsFetched+=1,t.bidsFetched<this.servers.length-t.skippedServers){this.slotStatuses.set(e,t);return}this.getSlot(e)&&(t.requestedRefresh=!0,this.slotStatuses.set(e,t),super.refreshSlot(e))}}refreshSlot(e){this.slotStatuses.set(e,new W),this.servers.forEach(t=>{t.refreshSlot(e,()=>this.skipServer(e),()=>this.doRefresh(e))})}constructor(e,t,s){super(e,s),eL(this,"servers",void 0),eL(this,"slotStatuses",void 0),eL(this,"slotPositions",void 0),this.servers=t,this.slotStatuses=new Map,this.slotPositions=s;var r=this.servers.flatMap(e=>(e.setContext(this),e.getScripts(!0)));r.length&&(this.scriptLoader=new X({fetchMargin:e.fetchMargin,renderMargin:e.renderMargin,scriptSources:[Z.GPT,...r],recordScriptLoadFailure:e.recordScriptLoadFailure}))}}),e("BrandMetricsAdServer",Q=class{setContext(e){this.context=e}getScripts(e=!0){return e?[Z.BRAND_METRICS]:[]}refreshSlot(e,t){t()}triggerSRARefresh(e){e()}constructor(e){eq(this,"context",void 0),eq(this,"config",void 0),this.config=e,this.context=null}}),e("TestAdServer",Y=class e extends N{static getAdBase(e){return e.replace(/\.s\//,".test.s/")}createSlot({id:t,targeting:s,...r}){return super.createSlot({id:t,targeting:{...s,adBase:e.getAdBase(s.adBase)},...r})}destroySlot(e){super.destroySlot(e)}refreshSlot(e){super.refreshSlot(e)}constructor(e){super(e)}}),ei=e_,ea=eo=n({targeting:{},setTargeting:()=>{}}),en=eN,el=n({pageAdSlotSettings:null}),eg=ed=n({isHorizonAdSticky:!1,setIsHorizonAdSticky:()=>{},horizonAdHeight:0,setHorizonAdHeight:()=>{}}),eh=eV,ec=h(()=>t("fxp4ln")),eu=n(null),ep=c(eY),eS=eZ,ef=new Set(["Destinations","Beaches","Hotels","Restaurants","ThingsToDo"]),ev=e4,globalThis.googletag=globalThis.googletag||{cmd:[]},e({AD_TEST_MODE_STORAGE_KEY:eb,AdServer:eu,AdServerProvider:eS,AmazonAdServer:G,BrandMetricsAdServer:Q,FETCH_TIMEOUT:3e3,GptAdServer:N,HEADER_BIDDING_TIMEOUT:1e3,IasAdServer:K,PageAdSlotSettings:el,PageAdSlotSettingsProvider:e$,PageTargeting:ea,PageTargetingProvider:ej,PreBiddingGptAdServer:V,RubiconAdServer:$,StickyHorizonAdContext:eg,TestAdServer:Y,TestModeIndicator:ei,createSlotSizeOracle:eC,u:eJ,useAdSlotsList:eh,useDeletePPIDUserData:em=te,useGoogleTagSetConfig:e7,useGoogleTagUpdateCorrelator:e6,usePageTargeting:ev})},[e=>(s=e.jsxs,r=e.jsx),e=>(i=e.useState,o=e.useCallback,a=e.useEffect,n=e.createContext,l=e.useMemo,d=e.startTransition,g=e.Suspense,h=e.lazy,c=e.memo,u=e.useContext,p=e.useRef),e=>(S=e.useDebugTool,f=e.useDeviceId),e=>(v=e.useRoute,m=e.usePageviewUid),e=>b=e.useUserAgent,e=>A=e.useDomainName,e=>I=e.useLogAdScriptLoadFailure,e=>T=e.default,e=>E=e.ErrorBoundary,e=>(w=e.useBrandMetricsIntegrationTest,y=e.useStickyHorizonAd,R=e.useMobileAdExpansionTest),e=>C=e.default,e=>P=e.importScript,e=>(B=e.requestConsent,M=e.CategoriesEnum),e=>(x=e.useQuery,k=e.useClient),e=>D=e.useLocale,e=>O=e.useViewportCategory,e=>L=e.default,e=>q=e.default,e=>_=e.default,e=>j=e.useSessionId,e=>z=e.useTravelInfo,e=>F=e.useUserId,e=>H=e.stringHash,e=>U=e.useTheme]]},["21h32l","o4yt4q","p5p2yo","fgwvq1","nnprhg","qlcuu5","tbkd43","btbawi","83pm0d","nexzid","9b9b10","q7wvkq","973cci","mqwhqn","7thqz4","ys6v1o","gugp1d","tm6ey6","tp1g68","al4vil","etaac9","52far5","eww825","u9jlwp"]]);
