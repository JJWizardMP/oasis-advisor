(this.$WP=this.$WP||[]).push(["75s183",(e,r)=>{var t,n,i,a,o,l,s,d,c,u,m,p,g,h,f,v,y,w,b,k,D,C,R,T,_,x,S,I,N,O,P,B,U,L,E,F,A,j,q,M,z,H,K,X,G,Y,$,W,Z,V,J,Q,ee,er,et,en,ei,ea,eo,el,es,ed,ec,eu={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},em=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,ep=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,eg=/^([+-])(\d{2})(?::?(\d{2}))?$/;function eh(e,r){!function(e,r){if(r.length<e)throw TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+r.length+" present")}(1,arguments);var t,n,i=r||{},a=null==i.additionalDigits?2:function(e){if(null===e||!0===e||!1===e)return NaN;var r=Number(e);return isNaN(r)?r:r<0?Math.ceil(r):Math.floor(r)}(i.additionalDigits);if(2!==a&&1!==a&&0!==a)throw RangeError("additionalDigits must be 0, 1 or 2");if(!("string"==typeof e||"[object String]"===Object.prototype.toString.call(e)))return new Date(NaN);var o=function(e){var r,t={},n=e.split(eu.dateTimeDelimiter);if(n.length>2)return t;if(/:/.test(n[0])?(t.date=null,r=n[0]):(t.date=n[0],r=n[1],eu.timeZoneDelimiter.test(t.date)&&(t.date=e.split(eu.timeZoneDelimiter)[0],r=e.substr(t.date.length,e.length))),r){var i=eu.timezone.exec(r);i?(t.time=r.replace(i[1],""),t.timezone=i[1]):t.time=r}return t}(e);if(o.date){var l=function(e,r){var t=RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+r)+"})|(\\d{2}|[+-]\\d{"+(2+r)+"})$)"),n=e.match(t);if(!n)return{year:null};var i=n[1]&&parseInt(n[1]),a=n[2]&&parseInt(n[2]);return{year:null==a?i:100*a,restDateString:e.slice((n[1]||n[2]).length)}}(o.date,a);t=function(e,r){if(null===r)return null;var t,n,i=e.match(em);if(!i)return null;var a=!!i[4],o=ef(i[1]),l=ef(i[2])-1,s=ef(i[3]),d=ef(i[4]),c=ef(i[5])-1;if(a)return d>=1&&d<=53&&c>=0&&c<=6?((t=new Date(0)).setUTCFullYear(r,0,4),n=t.getUTCDay()||7,t.setUTCDate(t.getUTCDate()+((d-1)*7+c+1-n)),t):new Date(NaN);var u=new Date(0);return l>=0&&l<=11&&s>=1&&s<=(ey[l]||(ew(r)?29:28))&&o>=1&&o<=(ew(r)?366:365)?(u.setUTCFullYear(r,l,Math.max(o,s)),u):new Date(NaN)}(l.restDateString,l.year)}if(isNaN(t)||!t)return new Date(NaN);var s=t.getTime(),d=0;if(o.time&&(isNaN(d=function(e){var r=e.match(ep);if(!r)return null;var t=ev(r[1]),n=ev(r[2]),i=ev(r[3]);return(24===t?0===n&&0===i:i>=0&&i<60&&n>=0&&n<60&&t>=0&&t<25)?36e5*t+6e4*n+1e3*i:NaN}(o.time))||null===d))return new Date(NaN);if(o.timezone){if(isNaN(n=function(e){if("Z"===e)return 0;var r=e.match(eg);if(!r)return 0;var t="+"===r[1]?-1:1,n=parseInt(r[2]),i=r[3]&&parseInt(r[3])||0;return i>=0&&i<=59?t*(36e5*n+6e4*i):NaN}(o.timezone)))return new Date(NaN)}else{var c=new Date(s+d),u=new Date(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate(),c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds());return u.setFullYear(c.getUTCFullYear()),u}return new Date(s+d+n)}function ef(e){return e?parseInt(e):1}function ev(e){return e&&parseFloat(e.replace(",","."))||0}var ey=[31,null,31,30,31,30,31,31,30,31,30,31];function ew(e){return e%400==0||e%4==0&&e%100}var eb=()=>{var{localize:e}=P();return t(x,{padding:"spacing-03",children:[t(x,{display:"flex",flexDirection:"column",alignItems:"center",marginTop:"spacing-04",marginBottom:"spacing-06",children:[n(B,{variant:"supporting-02",children:e.string("plus_roomlist_skeleton_support")}),n(W,{})]}),er,er,er,er]})},ek={__key:0xdd9620b27b64,id:"dd9620b27b64a26c",loc:{},definitions:[]},eD={headerContainer:"Hnbqz f k",headerContainerRedesign:"TJsdi",headerContainerCoBranding:"yNImk",title:"yrRAp",leftBorder:"Tftqk"},eC=({coBrandingLogoUrl:e,isRoomGridRedesignEnabled:r})=>t("div",{className:m(eD.headerContainer,{[eD.headerContainerRedesign]:r,[eD.headerContainerCoBranding]:!!e}),children:[n(x,{display:"flex",className:eD.title,children:n(B,{variant:"title-02",children:n(O,{id:"hr_ib_offer_select_your_room"})})}),t(x,{display:"flex",flexDirection:"row",alignItems:"center",children:[n(x,{display:"flex",marginRight:"spacing-02",alignItems:"center",marginBottom:r?"spacing-03":"spacing-00",children:n(Z,{variant:"plus-logo-short",height:e?23:28})}),e&&t(x,{display:"flex",flexDirection:"row",alignItems:"center",children:[n("div",{className:eD.leftBorder,children:n(B,{variant:"supporting-02",marginX:"spacing-01",children:"in partnership with"})}),n(V,{src:`https:${e}`,height:30})]})]})]}),eR=({checkInDate:e,checkOutDate:r,numAdults:i,numChildren:a,numRooms:o,openPicker:l})=>t(x,{paddingX:"spacing-03",paddingTop:"spacing-03",children:[t(x,{display:"flex",justifyContent:"space-between",flexDirection:["column","row-reverse","row-reverse"],paddingX:["spacing-00","spacing-02","spacing-02"],marginBottom:"spacing-04",children:[n(J,{width:176}),n(x,{display:"flex",paddingTop:["spacing-03","spacing-00","spacing-00"],children:n(B,{variant:"title-02",children:n(O,{id:"hr_ib_offer_select_your_room"})})})]}),t(x,{display:"flex",flexDirection:["column","row","row"],paddingX:["spacing-00","spacing-02","spacing-02"],children:[n(B,{variant:"body-01",marginRight:"spacing-02",children:n(O,{id:"hr_ib_offer_best_prices_for"})}),t(x,{display:"flex",flexDirection:"row",children:[n(X,{checkInDate:e,checkOutDate:r,numberOfRooms:o,numberOfAdults:i,numberOfChildren:a}),n(E,{marginLeft:"spacing-04",onClick:l,children:n(O,{id:"hr_ib_offer_edit"})})]})]})]}),eT=({perks:e,cashbackDisplayAmount:r})=>{var{localize:i}=P(),[a,o]=l(!1);return r||e&&e.length>0?n(x,{className:"znZCg Ra d",marginTop:"spacing-03",children:t(B,{variant:"title-05",children:[i.string("plus_roomlist_callout_good_upgrade"),"\xa0",n("button",{className:"YkSFV B- Cg _S d",onClick:()=>o(!0),children:n(Q,{})}),a&&n(ee,{variant:"steps",onClose:()=>o(!1),perks:e,cashbackDisplayAmount:r,showCloseButton:!1})]})}):null},e_=({optimusPerks:e,variant:r="PARTIAL"})=>{var{localize:a}=P();return t(i,{children:[t(x,{display:"flex",flexDirection:"row",alignItems:"flex-start",paddingX:"spacing-04",paddingTop:"spacing-04",children:[n(B,{variant:"title-02",children:a.string("plus_roomlist_select_your_room")}),n("div",{className:"HLzBW F2 Wi",children:n(Z,{variant:"plus-logo-short"})})]}),n(x,{display:"flex",flexDirection:"column",alignItems:"flex-start",paddingX:"spacing-04",children:n(B,{variant:"supporting-01",marginY:"spacing-02",children:a.string("plus_roomlist_support")})}),"FULL"===r&&n(x,{paddingX:"spacing-04",children:n(ea,{perks:e})})]})},ex="plus_red_room_list_on_/hr_v2_1624295048",eS="room-grid-ready",eI=()=>n(et,{}),eN=(e,r)=>(!r&&e?.OptimusRoomCatalog_getRooms[0]?.rooms||[]).map(e=>({key:e.key,shortDescription:e.shortDescription,longDescription:e.longDescription,photos:e.photos})),eO=(e,r)=>{if(e){var t=e.getBoundingClientRect().top+window.pageYOffset-r;window.scrollTo({top:t,behavior:"smooth"})}},eP=({checkInDate:e,checkOutDate:r,coBrandingLogoUrl:a,hasCashback:o,isIbBranded:l,isRoomGridRedesign:s,numAdults:d,numChildren:c,numRooms:u,openPicker:m,optimusPerks:p})=>l?n(ei,{checkInDate:e,checkOutDate:r,numAdults:d,numChildren:c,numRooms:u,openPicker:m}):o||s?t(i,{children:[n(en,{coBrandingLogoUrl:a,isRoomGridRedesignEnabled:s}),t(x,{paddingX:"spacing-04",display:"flex",flexDirection:["column","row","row"],children:[n(B,{variant:"body-01",marginRight:"spacing-02",children:n(O,{id:"hr_ib_offer_best_prices_for"})}),t(x,{display:"flex",flexDirection:"row",children:[n(X,{checkInDate:e,checkOutDate:r,numberOfRooms:u,numberOfAdults:d,numberOfChildren:c}),n(E,{marginLeft:"spacing-04",onClick:m,children:n(O,{id:"hr_ib_offer_edit"})})]})]})]}):n(eo,{variant:"FULL",optimusPerks:p}),eB=({bookingSessionId:e,offerData:r,partnerData:a=[],roomSelectionSummary:o,roomSelectionData:s,bookingAdditionalContext:d,optimusSavings:u,optimusSubscriptionPrice:m,refreshRooms:w,onSelectRoom:_,showPriceMismatchError:x,onPriceMismatchErrorShown:S,parentFunnelKey:N,funnelKey:O,isCashback:P,hasError:B,setFullStoryCustomAttributes:U,logFullStoryEvent:L})=>{var E={...s.polling,...s?.trackingContext?{trackingContext:s.trackingContext}:{}},[F,{partnerData:A,roomSelectionData:q},M]=b({...s,polling:E},a,P),z=F?A:a,H=F?q:s;k(o,w);var K=D(z||[],u,d.originalMetaPrice),{filterBlockedRooms:X}=C(),G=X(K,o,H?.partnerInfos[0]?.commerce?.providerId),[$,W]=l(!1);c(()=>{var e=setTimeout(()=>W(!0),36e5);return()=>clearTimeout(e)},[]);var Z=j(),{page:V}=g(),J=h(),Q=p(),ee=f(),er=I(),{plusRoomGridRedesign:et,fetching:en}=Y();c(()=>{U({isSubscriber:m?.isMember||!1,isVF:P});var e={numberOfRooms:G.length,providerOfOffer:H?.partnerInfos[0]?.displayName||"",funnelKey:O||""};L("PlusEvent",e),er&&Z({itemType:"optimusCheckoutStep",itemId:"RoomSelection",itemName:"FULL_STORY",team:"Plus",impressionKey:O||"",pageUid:J,sessionId:Q,userId:ee,page:V,customData:JSON.stringify(e)})},[m,P,G,H,U,L,O,er,Z,V,Q,ee,J]);var ei=!!M||B,ea=d.originalMetaPrice>0,eo=R(z,d),el=(z||[])[0]?.name,ed=H.partnersOptimusPerks[el||""]||[],ec=(z||[])[0]?.hotel?.locationId,eu=(z||[])[0]?.coBrandingLogoUrl;if(!F||en)return n(eI,{});if(ei)return n(v,{variant:"inline",onClick:()=>{!G.length||M?(window.location.reload(),window.scrollTo(0,0)):S()}});var em=new Date(eh(H.summary.checkInDs)),ep=new Date(eh(H.summary.checkOutDs)),eg=r?.optimusBranding==="IB";return t(i,{children:[n(eP,{checkInDate:em,checkOutDate:ep,coBrandingLogoUrl:eu,hasCashback:!!u?.cashback,isIbBranded:eg,isRoomGridRedesign:et,numRooms:H.summary.rooms,numAdults:H.summary.adults,numChildren:H.summary.totalChildren,openPicker:()=>{es.emit("open")},optimusPerks:ed}),ea&&"same"!==eo&&x&&!$&&!ei&&n(y,{}),M?null:n(T,{bookingSessionId:e,rooms:G||[],flow:"HOTEL",onSelectRoom:_,offerData:r,alwaysStretchShowAllButton:!1,allowCollapse:!0,locationId:ec,parentImpressionKey:N||void 0,isCashback:P,optimusPerks:ed,isRoomGridRedesign:et})]})},eU=({offerData:e,guests:r,locationId:i})=>{var[a,o]=l(0),[u,m]=l(!1),[v,y]=l(null),[b,k]=l(null),[D,C]=l(!1),R=p(),T=f(),x=s(null),{page:I}=g(),O=h(),P=s(null),B=s(null),U=L({experimentKeys:[ex]}),[E,F]=l(!1),z=null!==U&&"test"===U[ex],H=j(),X=G(),Y=d((e,r,t)=>{X({itemType:"optimusCheckoutPurchaseError",itemName:e,impressionKey:P.current||"",customData:{flow:"HOTEL",reasonType:t||"Unknown",errorDetail:r}})},[P,X]),$=d(e=>{Y(e?e.map(({name:e})=>e).join("|"):"MISSING_DATA",e?e.map(({message:e})=>e).join("|"):"",e?e.map(({type:e})=>e).join("|"):"Unknown")},[Y]);c(()=>{(a||u)&&eO(x.current,96)},[a,u]),c(()=>(b?(el.emit(eS,!1),el.reply(eS,()=>!1)):(el.emit(eS,!0),el.reply(eS,()=>!0)),()=>{el.emit(eS,!1),el.reply(eS,()=>!1)}),[b,e]),c(()=>{b&&(Y(b),C(!0))},[b,Y]),c(()=>{var e=e=>{B.current=e,a&&x.current?eO(x.current,96):o(e=>e+1)};return el.on("expand-rooms",e),()=>{el.off("expand-rooms",e)}},[a]);var W=e&&e.clickToken||"",Z=()=>{o(e=>e+1)},V=()=>{Z()};c(()=>{if(!W){y(null);return}window.require(["trjs!commerce/offerclick"],e=>{var r=e.expandToken(W);P.current=r.ik;var t=null;try{var[,n]=(r.url||"").split("?");t=new URLSearchParams(n)}catch(e){y(null);return}if(!t||!a){y(null);return}if(m(!0),1===a){H({itemType:"optimusCheckoutStep",itemId:"RoomSelection",itemName:"ROOMLIST",team:"Plus",impressionKey:P.current||"",pageUid:O,sessionId:R,userId:T,page:I,customData:JSON.stringify({flow:"HOTEL",booking_flow:"allowed"})});var i=new AbortController,o=setTimeout(()=>i.abort(),3e3);t.set("puid",encodeURIComponent(O)),fetch("/StartBooking",{method:"POST",credentials:"same-origin",body:t.toString(),headers:{"content-type":"application/x-www-form-urlencoded"},signal:i.signal}).finally(()=>clearTimeout(o))}t.delete("puid"),t.delete("src"),t.append("sar","true"),fetch(`/data/1.0/booking/rooms?${t.toString()}`,{method:"GET",credentials:"same-origin",headers:{"Content-Type":"application/json"}}).then(e=>e.ok?e.json():(k("REQUEST_FAILURE"),null)).then(y).finally(()=>m(!1))})},[T,R,I,a,W,H,O]);var J=K(r),[{data:Q,fetching:ee}]=M({query:ek,variables:{locationId:i||0,numRooms:J?.rooms||0,numAdults:J?.adults||0,numChildren:J?.children||0,providerId:e?.provider||""},pause:!e?.provider||!e?.isOptimusOffer||!T||!z}),er=eN(Q,ee);return!a&&er.length&&T&&z&&e?.optimusBookingFlow==="ALLOWED"?n(A,{funnelKey:P.current,children:t(ed,{ref:x,children:[n(eo,{variant:"PARTIAL"}),n(_,{partialRooms:er,flow:"HOTEL",onSelectShowPrice:()=>o(e=>e+1),locationId:i||0})]})}):e?.isOptimusOffer&&(ee||a)?n(S,{children:n(N.Consumer,{children:({setCustomAttributes:r,logEvent:t})=>n(A,{funnelKey:P.current,children:n(w,{data:v,loading:u,error:b,children:({bookingData:i,errors:a,loading:o})=>{if(o||ee)return n(ed,{ref:x,children:n(eI,{})});var{bookingSessionId:l,partnerData:s,roomSelectionSummary:d,roomSelectionData:c,bookingAdditionalContext:u,optimusSavings:m,optimusSubscriptionPrice:p,isCashback:g}=i||{};return!c||a?n(q,{onVisible:()=>{el.emit(eS,!1),$(a)},children:e=>n("div",{ref:e})}):n(ed,{ref:x,children:n(eB,{bookingSessionId:l,offerData:e,partnerData:s||[],roomSelectionSummary:d,roomSelectionData:c,bookingAdditionalContext:u,optimusSavings:m,optimusSubscriptionPrice:p,refreshRooms:Z,onSelectRoom:V,showPriceMismatchError:!E,onPriceMismatchErrorShown:()=>F(!0),parentFunnelKey:B.current,funnelKey:P.current,isCashback:g,hasError:D,setFullStoryCustomAttributes:r,logFullStoryEvent:t})})}})})})}):null},eL=e=>n(o,{shouldShowToggleButton:!0,children:n(ec,{offerData:e.listing?.chevronOffers?.find(e=>!!e.data.isOptimusOffer)?.data,locationId:e.hotelId})}),eE=({optimusEnabled:e})=>n(a,{optimusEnabled:e,children:e=>n(eL,{...e})});return[()=>{er=t(x,{display:"flex",flexDirection:"row",alignItems:"flex-start",justifyContent:"flex-start",children:[n("div",{className:"EXXqb Wh",children:n($,{height:"100%",width:"100%"})}),t("div",{className:"vljsv F2",children:[n($,{height:21,width:"50%"}),n($,{height:21,width:"80%",marginTop:12}),n($,{height:21,width:"65%",marginTop:12})]})]}),et=eb,en=eC,ei=eR,ea=eT,eo=e_,el=U("optimus/room-list"),es=U("h-drg"),ed=u(function({children:e},r){var a=s(null),{enabled:o}=H();return t(i,{children:[n(x,{backgroundColor:"primaryBackground",marginBottom:"spacing-04",ref:r,className:m({"B1 Z BB":o}),children:e}),n(F,{callback:()=>{a.current&&(a.current.getBoundingClientRect().bottom<0?el.emit("sticky-top-bar-enable"):el.emit("sticky-top-bar-disable"))}})]})}),ec=z(e=>({guests:e.travelerInfo.hotels?.guests||""}))(eU),e({HotelReviewRoomListRenderer:eL,default:eE})},[e=>(t=e.jsxs,n=e.jsx,i=e.Fragment),e=>a=e.MetaQueryPoller,e=>o=e.default,e=>(l=e.useState,s=e.useRef,d=e.useCallback,c=e.useEffect,u=e.forwardRef),e=>m=e.default,e=>p=e.useSessionId,e=>(g=e.useRoute,h=e.usePageviewUid),e=>f=e.useUserId,e=>(v=e.RoomUnavailableAlert,y=e.PriceMismatchAlert),e=>(w=e.HotelCheckoutParsedDataSupplier,b=e.useRoomSelectionPolling,k=e.useRefreshRooms,D=e.useRoomsWithPatchedSavings,C=e.useBlockedRooms),e=>R=e.usePriceMismatchCheck,e=>(T=e.default,_=e.PartialRoomGrid),e=>x=e.Box,e=>(S=e.PlusFullStoryProvider,I=e.useFullStoryEnabled),e=>N=e.BaseFullStoryContext,e=>(O=e.default,P=e.useLocalize),e=>B=e.default,e=>U=e.createRadio,e=>L=e.default,e=>E=e.BorderlessButton,e=>F=e.default,e=>A=e.FunnelTrackingProvider,e=>j=e.default,e=>q=e.HasBeenVisible,e=>M=e.useQuery,e=>z=e.connect,e=>H=e.useHRExpandedCommerce,e=>K=e.parseGuestInfo,e=>X=e.default,e=>G=e.useOptimusImpression,e=>Y=e.useRoomGridRedesignEnabled,e=>$=e.default,e=>W=e.OllieSpinner,e=>Z=e.default,e=>(V=e.OptimusPartnerLogo,J=e.TripadvisorLogo),e=>Q=e.default,e=>ee=e.default]]},["21h32l","nzwvrx","33n48z","o4yt4q","fkji80","al4vil","fgwvq1","52far5","sfmsly","vk3cpw","4lbe82","vmz0vp","lyyh8d","79sk7i","4cu0tk","7thqz4","essqvy","bqgabj","gugp1d","jppfwt","w1vb4i","kkqcv8","xg719z","w0dpwq","mqwhqn","2mj4nv","wsk8ra","bxkng5","jllnoc","yc73mo","7g0c7c","u59av4","qndsds","sw5ax0","bovo24","zq967r","bnv3wx"]]);
