(this.$WP=this.$WP||[]).push(["q7jm9a",(e,r)=>{var n,o,t,a,u,c,l,d,h,i={current:null},s={current:null},g=()=>new Promise((e,r)=>{if(s.current){e(s.current);return}if(i.current){e(i.current);return}i.current=fetch("/data/1.0/vr/countryRegionCodesForPhone",{method:"GET",credentials:"same-origin"}).then(e=>e.json().then(e=>(i.current=null,s.current=e,e)).catch(e=>(console.error(e.message),r(e)))),e(i.current)}),p=()=>{s.current=null},C=(e,r)=>{var n=new URLSearchParams({phoneNumber:e,region:r});return fetch(`/data/1.0/vr/validatePhoneNumber?${n.toString()}`,{method:"GET",credentials:"same-origin"}).then(e=>e.json()).then(e=>e)},v="setData",m=(e,r)=>{var{type:n,value:o}=r;return n===v?{...e,data:o}:e},y=e=>{var[{data:r},n]=a(m,e);return[r,e=>{n({type:v,value:e})}]},P=(e=!1)=>{var[r,n]=u(!1),[o,t]=u(!1),[a,d]=l({data:[]}),h=e=>{n(!1),d(e.options||[])},i=()=>{n(!1),t(!0)};return c(()=>()=>{e&&p()},[e]),{data:a,fetching:r,error:o,clearCache:p,fetchCodes:()=>(n(!0),t(!1),g().then(h).catch(i))}},f=(e,r)=>{var{data:n,fetchCodes:o,fetching:t,error:a}=d(r),u=e&&e.length?e:n.map(e=>({regionISOCode:e?.countryValue?.countryRegionCode||"",regionPhoneCode:e?.countryValue?.countryPhoneCode||"",label:e?.countryCodeDropDownValue||""}));return c(()=>{u.length||t||a||o()},[a,t,u.length,o]),u},S=({value:e,onChange:r,onFocus:a=()=>{},onBlur:u=()=>{},options:c,hideAutoComplete:l,autoCompleteIdentifier:d,hasError:i,errorText:s})=>{var{phone:g="",countryISOCode:p}=e||{},{localize:C}=o(),v=h(c),m=v.map(({label:e,regionISOCode:r})=>({displayName:e,value:r})),[y]=v.filter(e=>e.regionISOCode===p),{regionISOCode:P,regionPhoneCode:f}=y||{};return n(t,{dropdownValue:f?`+${f}`:void 0,dropdownOptions:m,onDropdownChange:e=>{var[n]=v.filter(r=>r.regionISOCode===e),{regionISOCode:o,regionPhoneCode:t}=n||{};r({phone:g,countryISOCode:o,countryPhoneCode:t})},dropdownPlaceholder:"+1",menuLabel:C.string("createlisting_phone_country_label"),name:"phone-number",value:g,onFocus:a,onBlur:u,onChange:e=>{r({countryISOCode:P,countryPhoneCode:f,phone:e.currentTarget.value})},placeholder:C.string("createlisting_phone_placeholder"),autoComplete:l?"off":d||"on",errorText:i?s:void 0})};return[()=>{l=y,d=P,e({PhoneInput:S,useCountryCodeValues:h=f,validatePhone:C})},[e=>n=e.jsx,e=>o=e.useLocalize,e=>t=e.TextInput,e=>(a=e.useReducer,u=e.useState,c=e.useEffect)]]},["21h32l","7thqz4","u3aiot","o4yt4q"]]);
